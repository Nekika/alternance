(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{357:function(e,t,s){e.exports=s.p+"assets/img/attributes_form.1860b71c.png"},358:function(e,t,s){e.exports=s.p+"assets/img/config_preview.75627b86.gif"},359:function(e,t,s){e.exports=s.p+"assets/img/config_destination.9aaf2c8e.png"},360:function(e,t,s){e.exports=s.p+"assets/img/config_server.f7a49f4d.png"},361:function(e,t,s){e.exports=s.p+"assets/img/config_header.5c789952.png"},362:function(e,t,s){e.exports=s.p+"assets/img/config_form.c8d4d8e2.png"},393:function(e,t,s){"use strict";s.r(t);var r=s(42),a=Object(r.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"plugin-qgis"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#plugin-qgis"}},[e._v("#")]),e._v(" Plugin QGIS")]),e._v(" "),r("h2",{attrs:{id:"introduction"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#introduction"}},[e._v("#")]),e._v(" Introduction")]),e._v(" "),r("p",[e._v("En parralèle du développment de l'application client, j'ai mis au point un "),r("strong",[e._v("plugin QGIS")]),e._v(" qui en "),r("strong",[e._v("facilite la configuration")]),e._v(".")]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[e._v("Informations")]),e._v(" "),r("p",[r("strong",[e._v("Contexte")]),e._v(" : Pour rendre CartoGIS54 générique et adaptable à tous les projets, un fichier de configuration a été mis en place.")]),e._v(" "),r("p",[r("strong",[e._v("Problème")]),e._v(" : Remplir le fichier de configuration manuellement peut s'avérer fastidieux.")]),e._v(" "),r("p",[r("strong",[e._v("Objectif")]),e._v(" : Proposer un extension QGIS qui génèrera un fichier de configuration à partir d'informations saisies par l'utilisateur.")]),e._v(" "),r("p",[r("strong",[e._v("Technologies utilisées")]),e._v(" : Python")])]),e._v(" "),r("h2",{attrs:{id:"analyse"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#analyse"}},[e._v("#")]),e._v(" Analyse")]),e._v(" "),r("p",[e._v("Cette extension a été pensée pour permettre aux utilisateurs de QGIS d'obtenir une certaine "),r("strong",[e._v("uniformité")]),e._v(" entre leurs "),r("strong",[e._v("projets")]),e._v(" et les "),r("strong",[e._v("applications Web")]),e._v(" qu'ils créent à l'aide de "),r("strong",[e._v("CartoGIS54")]),e._v(".")]),e._v(" "),r("p",[e._v("En effet, l'idée est de proposer un plugin capable de "),r("strong",[e._v("convertir la configuration d'un projet QGIS en un fichier de configuration interprétable CartoGIS54")]),e._v(", tout en permettant à l'utilisateur de "),r("strong",[e._v("saisir des informations")]),e._v(" telles que "),r("strong",[e._v("l'adresse du serveur de flux WMS/WFS")]),e._v(".")]),e._v(" "),r("p",[e._v("Ayant déjà eu l'occasion de développer une extension QGIS au cours de mon apprentissage (cf. "),r("a",{attrs:{href:"/projets-annexes/smc"}},[e._v("Projets annexes - SMC")]),e._v("), j'ai gagné un temps précieux et j'ai pu me concentrer sur "),r("strong",[e._v("l'analyse des besoins")]),e._v(".")]),e._v(" "),r("h3",{attrs:{id:"besoins"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#besoins"}},[e._v("#")]),e._v(" Besoins")]),e._v(" "),r("p",[e._v("Pour que l'extension soit capable de "),r("strong",[e._v("générer")]),e._v(" un fichier de configuration à partir des "),r("strong",[e._v("réglages")]),e._v(" d'un projet QGIS et d'"),r("strong",[e._v("informations")]),e._v(" saisies par l'utilisateur, il est nécessaire de mettre en places "),r("strong",[e._v("3 fonctionnalités principales")]),e._v(".")]),e._v(" "),r("h4",{attrs:{id:"recuperer-la-configuration-des-couches"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#recuperer-la-configuration-des-couches"}},[e._v("#")]),e._v(" Récupérer la configuration des couches")]),e._v(" "),r("p",[e._v("Pour chaque couche, QGIS offre la possibilité de personnaliser le "),r("strong",[e._v("formulaire d'attributs")]),e._v(".")]),e._v(" "),r("p",[e._v("Ainsi, il est possible de déterminer le "),r("strong",[e._v("style du champ")]),e._v(" (date, nombre, liste de valeurs, ...), une "),r("strong",[e._v("valeur par défaut")]),e._v(" et des "),r("strong",[e._v("contraintes")]),e._v(" telles que l'obligation de remplir le champ.")]),e._v(" "),r("p",[r("img",{attrs:{src:s(357),alt:"attribute-form"}})]),e._v(" "),r("p",[e._v("Nous souhaitons donc récupérer ces informations de sorte à mettre en forme le "),r("strong",[e._v("Formulaire")]),e._v(" de l'application client de la même manière.")]),e._v(" "),r("h4",{attrs:{id:"permettre-la-saisie-d-informations"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#permettre-la-saisie-d-informations"}},[e._v("#")]),e._v(" Permettre la saisie d'informations")]),e._v(" "),r("p",[e._v("L'objectif étant également de permettre à l'utilisateur de saisir des "),r("strong",[e._v("informations")]),e._v(" nécessaires au bon fonctionnement de l'application client, il faut mettre en place une "),r("strong",[e._v("interface utilisateur")]),e._v(".")]),e._v(" "),r("h4",{attrs:{id:"generer-le-fichier-de-configuration"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#generer-le-fichier-de-configuration"}},[e._v("#")]),e._v(" Générer le fichier de configuration")]),e._v(" "),r("p",[e._v("Enfin, il est nécessaire de l'application soit en mesure de "),r("strong",[e._v("retranscrire")]),e._v(" toutes les informations au sein d'un "),r("strong",[e._v("fichier")]),e._v(".")]),e._v(" "),r("p",[e._v("L'extension doit également permettre à l'utilisateur de choisir la "),r("strong",[e._v("destination")]),e._v(" de ce fichier.")]),e._v(" "),r("h2",{attrs:{id:"solution-proposee"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#solution-proposee"}},[e._v("#")]),e._v(" Solution proposée")]),e._v(" "),r("p",[e._v("Après quelques jours de développement, je suis parvenu à un résultat répondant aux besoins.")]),e._v(" "),r("p",[r("img",{attrs:{src:s(358),alt:"preview"}})]),e._v(" "),r("h3",{attrs:{id:"fonctionnement"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#fonctionnement"}},[e._v("#")]),e._v(" Fonctionnement")]),e._v(" "),r("p",[e._v("Le fonctionnement de l'extension est assez "),r("strong",[e._v("simple")]),e._v(" puisqu'il n'est composé que de "),r("strong",[e._v("trois étapes")]),e._v(".")]),e._v(" "),r("h4",{attrs:{id:"_1-recuperation-des-donnees"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-recuperation-des-donnees"}},[e._v("#")]),e._v(" 1. Récupération des données")]),e._v(" "),r("p",[e._v("Au lancement, le plugin se charge de "),r("strong",[e._v("récupérer les données des couches")]),e._v(".")]),e._v(" "),r("p",[e._v("De la même manière que pour le projet "),r("a",{attrs:{href:"/projets-annexes/smc"}},[e._v("SMC")]),e._v(", je me sers l'API "),r("a",{attrs:{href:"https://qgis.org/pyqgis/3.0/",target:"_blank",rel:"noopener noreferrer"}},[e._v("PyQGIS"),r("OutboundLink")],1),e._v(" pour accéder à ces informations.")]),e._v(" "),r("h4",{attrs:{id:"_2-interface-utilisateur"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-interface-utilisateur"}},[e._v("#")]),e._v(" 2. Interface utilisateur")]),e._v(" "),r("p",[e._v("Lorsque les données ont été récupérées, "),r("strong",[e._v("l'interface apparaît")]),e._v(" et l'utilisateur peut commencer à "),r("strong",[e._v("saisir des informations")]),e._v(".")]),e._v(" "),r("p",[e._v("L'interface est découpée en plusieurs partie, chacune étant liée à une "),r("strong",[e._v("section")]),e._v(" du "),r("strong",[e._v("fichier de configuration")]),e._v(" (cf. "),r("RouterLink",{attrs:{to:"/cartogis54/client.html#configuration"}},[e._v("Application Client")]),e._v(").")],1),e._v(" "),r("h5",{attrs:{id:"destination"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#destination"}},[e._v("#")]),e._v(" Destination")]),e._v(" "),r("p",[e._v("Sur la partie "),r("strong",[e._v("supérieure")]),e._v(" de l'application, le champ "),r("em",[e._v("Destination")]),e._v(" permet à l'utilisateur d'indiquer le "),r("strong",[e._v("chemin")]),e._v(" vers le répertoire dans lequel l'extension enregistrera le "),r("strong",[e._v("fichier de sortie")]),e._v(".")]),e._v(" "),r("p",[r("img",{attrs:{src:s(359),alt:"destination"}})]),e._v(" "),r("p",[e._v("En cliquant sur le boutton à droite de ce champ, l'utilisateur peut utiliser "),r("strong",[e._v("l'explorateur de fichier")]),e._v(" pour sélectionner le répertoire de manière "),r("strong",[e._v("interactive")]),e._v(".")]),e._v(" "),r("h5",{attrs:{id:"server"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#server"}},[e._v("#")]),e._v(" Server")]),e._v(" "),r("p",[e._v("Cette section permet à l'utilisateur de saisir "),r("strong",[e._v("l'URL")]),e._v(" ou "),r("strong",[e._v("l'adresse IP")]),e._v(" du "),r("strong",[e._v("serveur de flux WMS/WFS")]),e._v(" vers lequel l'application client devra effectuer des "),r("strong",[e._v("requêtes")]),e._v(".")]),e._v(" "),r("p",[r("img",{attrs:{src:s(360),alt:"server"}})]),e._v(" "),r("p",[e._v("De plus, à l'aide du tableau "),r("em",[e._v("Query parameters")]),e._v(" il est possible de définir des "),r("strong",[e._v("paramètres")]),e._v(" qui seront ajoutés à chaque requête vers le serveur.")]),e._v(" "),r("h5",{attrs:{id:"header"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#header"}},[e._v("#")]),e._v(" Header")]),e._v(" "),r("p",[e._v("Cet onglet est utile si vous souhaitez ajouter un "),r("strong",[e._v("logo")]),e._v(" dans "),r("strong",[e._v("l'En-tête")]),e._v(" de l'interface de votre application client ou bien si vous souhaitez y intégrer des "),r("strong",[e._v("modales")]),e._v(".")]),e._v(" "),r("p",[r("img",{attrs:{src:s(361),alt:"header"}})]),e._v(" "),r("h5",{attrs:{id:"form"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#form"}},[e._v("#")]),e._v(" Form")]),e._v(" "),r("p",[e._v("Cette dernière section permet de compléter la configuration des champs du "),r("strong",[e._v("Formulaire")]),e._v(" puisqu'elle permet de définir les champs qui doivent être "),r("strong",[e._v("désactivés")]),e._v(" ou "),r("strong",[e._v("cachés")]),e._v(".")]),e._v(" "),r("p",[r("img",{attrs:{src:s(362),alt:"form"}})]),e._v(" "),r("h4",{attrs:{id:"_3-generation-du-fichier"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-generation-du-fichier"}},[e._v("#")]),e._v(" 3. Génération du fichier")]),e._v(" "),r("p",[e._v("Au clic sur le bouton "),r("em",[e._v("Generate")]),e._v(", le plugin se charge de structurer les données au format "),r("strong",[e._v("JSON")]),e._v(" et de les "),r("strong",[e._v("écrire")]),e._v(" dans un fichier "),r("code",[e._v("app.config.json")]),e._v(" placé dans le répertoire choisi par l'utilisateur.")]),e._v(" "),r("p",[e._v("Pour ce faire, on utilise le package "),r("code",[e._v("os")]),e._v(" de "),r("strong",[e._v("Python")]),e._v(", permettant de maniupler le "),r("strong",[e._v("système de fichiers")]),e._v(" de la machine :")]),e._v(" "),r("p",[r("strong",[r("code",[e._v("utils/output.py")])])]),e._v(" "),r("div",{staticClass:"language-py extra-class"},[r("pre",{pre:!0,attrs:{class:"language-py"}},[r("code",[e._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("def")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("save")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("self"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    parsed_structure "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" json"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("dumps"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("self"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("structure"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    f "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("open")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("self"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("path"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"w+"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    f"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("write"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("parsed_structure"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    f"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("close"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])])]),r("h3",{attrs:{id:"structure"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#structure"}},[e._v("#")]),e._v(" Structure")]),e._v(" "),r("p",[e._v("La "),r("strong",[e._v("structure")]),e._v(" du projet est presque la même que celle du projet "),r("a",{attrs:{href:"/projets-annexes/smc"}},[e._v("SMC")]),e._v(" :")]),e._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[e._v("-- "),r("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$REPERTOIRE_QGIS_PLUGINS")]),e._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- CartoGIS54-config/\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- utils/\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- __init__.py\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- form.py\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- modals.py\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- output.py\n        "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- server.py\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- __init__.py\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- icon.png\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- metadata.txt\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- pb_tool.cfg\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- cartogis54.py\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- cartogis54_dialog.py\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- cartogis54_dialog_base.ui\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- README.md\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- resources.py\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("-- resources.qrc\n")])])]),r("ul",[r("li",[r("code",[e._v("utils/form.py")]),e._v(" : des fonctions permettant de remplir la table de la section Form.")]),e._v(" "),r("li",[r("code",[e._v("utils/modals.py")]),e._v(" : des fonctions permettant de remplir la table de la section Header.")]),e._v(" "),r("li",[r("code",[e._v("utils/output.py")]),e._v(" : une classe qui structure les données et génère le fichier de sortie.")]),e._v(" "),r("li",[r("code",[e._v("utils/server.py")]),e._v(" : des fonctions permettant de remplir la table de la section Server.")])]),e._v(" "),r("div",{staticClass:"custom-block warning"},[r("p",{staticClass:"custom-block-title"},[e._v("Note")]),e._v(" "),r("p",[e._v("Le contenu des autres fichiers est presque le même que celui de fichiers du projet "),r("a",{attrs:{href:"/projets-annexes/smc"}},[e._v("SMC")]),e._v(".")])]),e._v(" "),r("h3",{attrs:{id:"developpement"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#developpement"}},[e._v("#")]),e._v(" Développement")]),e._v(" "),r("p",[e._v("Étant donné que ce projet s'est voulu assez "),r("strong",[e._v("similaire")]),e._v(" au projet "),r("a",{attrs:{href:"/projets-annexes/smc"}},[e._v("SMC")]),e._v(", le développement s'est déroulé sans "),r("strong",[e._v("aucune difficulté")]),e._v(" puisque j'étais déjà à l'aise avec l'utilisation de l'API "),r("a",{attrs:{href:"https://doc.qt.io/qtforpython/",target:"_blank",rel:"noopener noreferrer"}},[e._v("PyQt"),r("OutboundLink")],1),e._v(" et de l'API "),r("a",{attrs:{href:"https://qgis.org/pyqgis/3.0/",target:"_blank",rel:"noopener noreferrer"}},[e._v("PyQGIS"),r("OutboundLink")],1),e._v(", au sein desquelles j'ai pu trouver tous les outils m'ayant permis de parvenir au résultat présenté.")]),e._v(" "),r("h2",{attrs:{id:"conclusion"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#conclusion"}},[e._v("#")]),e._v(" Conclusion")]),e._v(" "),r("p",[e._v("Bien que "),r("strong",[e._v("simple")]),e._v(", ce plugin permet de "),r("strong",[e._v("s'affranchir d'une configuration à la main")]),e._v(".")]),e._v(" "),r("p",[e._v("Travailler sur ce projet aura "),r("strong",[e._v("renforcé mes compétences")]),e._v(" en "),r("strong",[e._v("Python")]),e._v(" et en manipulation d'API de "),r("strong",[e._v("grande envergure")]),e._v(".")])])}),[],!1,null,null,null);t.default=a.exports}}]);