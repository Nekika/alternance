<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CartoGIS54 - Bourgs-Centres | Suivi d&#39;alternance</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css">
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
    <meta name="description" content="Ce rapport présentera l'institution et le service au sein desquels l'alternance a été réalisée.">
    <link rel="preload" href="/assets/css/0.styles.95c70d13.css" as="style"><link rel="preload" href="/assets/js/app.95b712ba.js" as="script"><link rel="preload" href="/assets/js/2.823c70a3.js" as="script"><link rel="preload" href="/assets/js/5.f5201cba.js" as="script"><link rel="preload" href="/assets/js/4.871bcf60.js" as="script"><link rel="preload" href="/assets/js/7.f6f50e7f.js" as="script"><link rel="preload" href="/assets/js/8.09563207.js" as="script"><link rel="preload" href="/assets/js/9.ac035cd6.js" as="script"><link rel="prefetch" href="/assets/js/10.bc8f9867.js"><link rel="prefetch" href="/assets/js/11.263d977d.js"><link rel="prefetch" href="/assets/js/12.cef03993.js"><link rel="prefetch" href="/assets/js/13.9fae9039.js"><link rel="prefetch" href="/assets/js/14.3914dd35.js"><link rel="prefetch" href="/assets/js/15.1e34ef7d.js"><link rel="prefetch" href="/assets/js/16.9dc726b6.js"><link rel="prefetch" href="/assets/js/17.2e2d2465.js"><link rel="prefetch" href="/assets/js/18.194d7317.js"><link rel="prefetch" href="/assets/js/19.2aec4bc1.js"><link rel="prefetch" href="/assets/js/20.743472b5.js"><link rel="prefetch" href="/assets/js/21.1ef79ede.js"><link rel="prefetch" href="/assets/js/22.cfa4da44.js"><link rel="prefetch" href="/assets/js/3.855c304c.js"><link rel="prefetch" href="/assets/js/6.e842a923.js">
    <link rel="stylesheet" href="/assets/css/0.styles.95c70d13.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Suivi d'alternance</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Accueil
</a></div><div class="nav-item"><a href="/presentation.html" class="nav-link">
  Présentation
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Prérequis" class="dropdown-title"><span class="title">Prérequis</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/prerequis/" class="nav-link">
  À propos
</a></li><li class="dropdown-item"><!----> <a href="/prerequis/qgis.html" class="nav-link">
  QGIS
</a></li><li class="dropdown-item"><!----> <a href="/prerequis/qgis-server.html" class="nav-link">
  QGIS Server
</a></li><li class="dropdown-item"><!----> <a href="/prerequis/lizmap.html" class="nav-link">
  Lizmap
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Projets annexes" class="dropdown-title"><span class="title">Projets annexes</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/projets-annexes/" class="nav-link">
  À propos
</a></li><li class="dropdown-item"><!----> <a href="/projets-annexes/modal.html" class="nav-link">
  Modal
</a></li><li class="dropdown-item"><!----> <a href="/projets-annexes/smc.html" class="nav-link">
  SMC
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CartoGIS54" class="dropdown-title"><span class="title">CartoGIS54</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cartogis54/" class="nav-link router-link-active">
  À propos
</a></li><li class="dropdown-item"><!----> <a href="/cartogis54/client.html" class="nav-link">
  Application client
</a></li><li class="dropdown-item"><!----> <a href="/cartogis54/plugin.html" class="nav-link">
  Plugin QGIS
</a></li><li class="dropdown-item"><!----> <a href="/cartogis54/bourgs-centres.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Bourgs-Centres
</a></li></ul></div></div><div class="nav-item"><a href="/liens.html" class="nav-link">
  Liens
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Accueil
</a></div><div class="nav-item"><a href="/presentation.html" class="nav-link">
  Présentation
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Prérequis" class="dropdown-title"><span class="title">Prérequis</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/prerequis/" class="nav-link">
  À propos
</a></li><li class="dropdown-item"><!----> <a href="/prerequis/qgis.html" class="nav-link">
  QGIS
</a></li><li class="dropdown-item"><!----> <a href="/prerequis/qgis-server.html" class="nav-link">
  QGIS Server
</a></li><li class="dropdown-item"><!----> <a href="/prerequis/lizmap.html" class="nav-link">
  Lizmap
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Projets annexes" class="dropdown-title"><span class="title">Projets annexes</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/projets-annexes/" class="nav-link">
  À propos
</a></li><li class="dropdown-item"><!----> <a href="/projets-annexes/modal.html" class="nav-link">
  Modal
</a></li><li class="dropdown-item"><!----> <a href="/projets-annexes/smc.html" class="nav-link">
  SMC
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CartoGIS54" class="dropdown-title"><span class="title">CartoGIS54</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cartogis54/" class="nav-link router-link-active">
  À propos
</a></li><li class="dropdown-item"><!----> <a href="/cartogis54/client.html" class="nav-link">
  Application client
</a></li><li class="dropdown-item"><!----> <a href="/cartogis54/plugin.html" class="nav-link">
  Plugin QGIS
</a></li><li class="dropdown-item"><!----> <a href="/cartogis54/bourgs-centres.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Bourgs-Centres
</a></li></ul></div></div><div class="nav-item"><a href="/liens.html" class="nav-link">
  Liens
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>CartoGIS54 - Bourgs-Centres</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cartogis54/bourgs-centres.html#introduction" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/cartogis54/bourgs-centres.html#analyse" class="sidebar-link">Analyse</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cartogis54/bourgs-centres.html#besoin" class="sidebar-link">Besoin</a></li><li class="sidebar-sub-header"><a href="/cartogis54/bourgs-centres.html#technologies" class="sidebar-link">Technologies</a></li></ul></li><li><a href="/cartogis54/bourgs-centres.html#solution-proposee" class="sidebar-link">Solution proposée</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cartogis54/bourgs-centres.html#interface-utilisateur" class="sidebar-link">Interface utilisateur</a></li><li class="sidebar-sub-header"><a href="/cartogis54/bourgs-centres.html#fonctionnement" class="sidebar-link">Fonctionnement</a></li></ul></li><li><a href="/cartogis54/bourgs-centres.html#cote-serveur" class="sidebar-link">Côté serveur</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cartogis54/bourgs-centres.html#administration-serveur" class="sidebar-link">Administration serveur</a></li><li class="sidebar-sub-header"><a href="/cartogis54/bourgs-centres.html#configuration-du-projet-qgis" class="sidebar-link">Configuration du projet QGIS</a></li></ul></li><li><a href="/cartogis54/bourgs-centres.html#developpement" class="sidebar-link">Développement</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cartogis54/bourgs-centres.html#environnement-technologique" class="sidebar-link">Environnement technologique</a></li><li class="sidebar-sub-header"><a href="/cartogis54/bourgs-centres.html#strucutre" class="sidebar-link">Strucutre</a></li><li class="sidebar-sub-header"><a href="/cartogis54/bourgs-centres.html#initialisation" class="sidebar-link">Initialisation</a></li><li class="sidebar-sub-header"><a href="/cartogis54/bourgs-centres.html#todo" class="sidebar-link">TODO</a></li></ul></li><li><a href="/cartogis54/bourgs-centres.html#a-venir" class="sidebar-link">À venir</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cartogis54/bourgs-centres.html#demonstration" class="sidebar-link">Démonstration</a></li><li class="sidebar-sub-header"><a href="/cartogis54/bourgs-centres.html#gestion-des-utilisateurs" class="sidebar-link">Gestion des utilisateurs</a></li><li class="sidebar-sub-header"><a href="/cartogis54/bourgs-centres.html#deploiement" class="sidebar-link">Déploiement</a></li></ul></li><li><a href="/cartogis54/bourgs-centres.html#confinement-et-teletravail" class="sidebar-link">Confinement et télétravail</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/cartogis54/bourgs-centres.html#conclusion-intermediaire" class="sidebar-link">Conclusion intermédiaire</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="bourgs-centres"><a href="#bourgs-centres" class="header-anchor">#</a> Bourgs-Centres</h1> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p><strong>Bourgs-Centres</strong> est le nom provisoire du projet majeur sur lequel j'ai eu l'opportunité de travailler pendant cette année au sein du service SIG.</p> <p>Sous un format <strong>d'application Web</strong>, c'est un outil qui permettra aux utilisateurs de <strong>saisir des données relatives à des projets d'aménagement.</strong></p> <div class="custom-block tip"><p class="custom-block-title">Informations</p> <p><strong>Contexte</strong> : Afin de redynamiser certains territoires autour de communes motrices appelées <strong>Bourgs-Centres</strong>,  le Conseil Départemental souhaite proposer un outil cartographique à destination des maires de ces communes.</p> <p><strong>Problème</strong> : D'ordinaire développées à l'aide de <strong>Lizmap</strong>, les applications Web de cartographie proposées par le Conseil Départemental peuvent s'avérer difficiles à prendre en main pour des utilisateurs novices.</p> <p><strong>Objectif</strong> : Permettre aux utilisateurs de saisir leurs données via une interface simple et intuitive.</p> <p><strong>Technologies utilisées</strong> : Vue.js, Leaflet, axios, QGIS, QGIS Server, PostGIS</p></div> <h2 id="analyse"><a href="#analyse" class="header-anchor">#</a> Analyse</h2> <p>La phase d'analyse fut essentielle pour assurer la <strong>bonne conduite</strong> de ce projet.</p> <p>En effet, grâce à <strong>liste des besoins</strong> émise par les différents services impliqués dans le développement des Bourgs-Centres, nous avons été en mesure d'imaginer à quoi devait ressembler le <strong>produit fini.</strong></p> <p>Cette vision nous a ensuite permis d'énumérer les <strong>fonctionnalités</strong> à implémenter et donc de définir <strong>l'environnement technologique</strong> de l'application.</p> <h3 id="besoin"><a href="#besoin" class="header-anchor">#</a> Besoin</h3> <p>L'objectif est de proposer une application de cartographie <strong>accessible</strong> à des utilisateurs novices, permettant à ces derniers de <strong>saisir des données.</strong></p> <p>Le terme <strong>accessible</strong> est très important puisqu'il détermine la direction que doit prendre le projet du point de vue du <strong>support</strong> et de <strong>l'expérience utilisateur</strong>.</p> <img src="/assets/img/maquette.fc25eabd.png" title="Maquette de l'interface" alt="bourgs-centres_maquette" data-align="center"> <h4 id="support"><a href="#support" class="header-anchor">#</a> Support</h4> <p>De nos jours, le Web permet de créer des applications <strong>accessibles rapidement et facilement</strong> pour des utilisateurs novices puisqu'ils n'ont besoin que d'un <strong>appareil connecté à internet.</strong></p> <p>Une <strong>application Web</strong> semble donc être le support adapté pour répondre au besoin.</p> <h4 id="experience-utilisateur"><a href="#experience-utilisateur" class="header-anchor">#</a> Expérience utilisateur</h4> <p>En terme d'expérience utilisateur, il est indispensable que cette dernière soit le plus simple possible. Pour cela, les actions de l'utilisateurs doivent être <strong>intuitives</strong> et <strong>peu nombreuses.</strong></p> <p>L'objectif de l'application étant de <strong>localiser</strong> des projets d'aménagement et de <strong>fournir des informations</strong> à leur propos, il faut que la prise en main du mécanisme de localisation soit <strong>intuitive</strong> et <strong>rapide</strong>, et que la saisie des données se fasse via un <strong>formulaire simple.</strong></p> <h4 id="fonctionnalites"><a href="#fonctionnalites" class="header-anchor">#</a> Fonctionnalités</h4> <p>L'analyse du besoin et de l'expérience utilisateur a servi à établir un liste de <strong>fonctionnalités minimales et indispensables</strong> permettant de proposer une première version d'application <strong>utilisable</strong> :</p> <ul><li><p><strong>Affichage des données</strong> : représenter les données en fonction de leur nature (point, ligne ou polygone) sur une carte dynamique.</p></li> <li><p><strong>Ajout, Modification, Suppression</strong> : implémenter les opérations indispensables à la saisie des données.</p></li> <li><p><strong>Saisie</strong> : proposer une interface permettant de saisir des données.</p></li> <li><p><strong>Persistence</strong> : établir la communication entre l'application client et le serveur afin de persister les données saisies.</p></li></ul> <h3 id="technologies"><a href="#technologies" class="header-anchor">#</a> Technologies</h3> <p>Afin de rester <strong>cohérent</strong> avec l'environnement technique le fonctionnement du service SIG, la <strong>partie serveur</strong> sera développé à l'aide des technologies habituelles (cf. <a href="/prerequis/">prérequis</a>) :</p> <ul><li><p><strong>QGIS</strong> : création et configuration du projet.</p></li> <li><p><strong>QGIS Server</strong> : génération et publication des flux WMS/WFS.</p></li> <li><p><strong>PostGIS</strong> : persitence des données.</p></li></ul> <p>Au niveau de la <strong>partie client</strong>, nous avons du choisir entre <strong>Lizmap</strong> ou un tout <strong>nouvel environnement technique.</strong></p> <p>Après avoir pris le temps d'analyser les avantages et les inconvénients de chaque option, nous avons décidé de ne pas retenir <strong>Lizmap</strong> pour ce projet.</p> <p>En effet, malgré les nombreux avantages proposés par cette solution, c'est sa <strong>difficulté de personnalisation</strong> qui lui a fait défaut (cf. la <a href="/prerequis/lizmap.html#inconvenient">présentation de Lizmap</a>).</p> <h4 id="nouveau-depart"><a href="#nouveau-depart" class="header-anchor">#</a> Nouveau départ</h4> <p>En ce qui concerne le <strong>nouvel environnement technologique</strong>, j'ai eu l'immense opportunité de <strong>choisir</strong> les technologies avec lesquelles je souhaitais travailler :</p> <ul><li><p><strong>Vue.js</strong> : construction de l'interface utilisateur.</p></li> <li><p><strong>Leaflet</strong> : affichage des données géospatiales sur une carte interactive.</p></li> <li><p><strong>axios</strong> : communication avec le serveur Web via des requêtes HTTP.</p></li></ul> <p>Vous pouvez retrouver la présentation et la justification du choix de ces technologies dans la section <a href="/projets/bourgs-centres.html#cote-client">#Côté client</a>.</p> <h2 id="solution-proposee"><a href="#solution-proposee" class="header-anchor">#</a> Solution proposée</h2> <p>Voici une démonstration permettant de visualiser l'état d'avancement du projet :</p> <img src="/assets/img/preview_alpha.d5f64a3a.gif" title="Démonstration version de développement" alt="bourgs-centres_preview_alpha" data-align="center"> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>Cette démonstration présente une version en cours de développement.</p> <p>La priorité étant d'implémenter les fonctionnalités minimales, il n'y a donc pas encore eu de réel travail au niveau de l'interface utilisateur.</p></div> <h3 id="interface-utilisateur"><a href="#interface-utilisateur" class="header-anchor">#</a> Interface utilisateur</h3> <p>Elle peut être découpée en 3 éléments :</p> <ul><li><p><strong>Carte</strong> : l'élément principal de l'application sur lequel sont représentées les données.</p></li> <li><p><strong>Menu</strong> : présentant la <strong>Liste des couches</strong> qui permet de visualiser celles qui sont disponibles, cet élément intègre également une <strong>Légende</strong> associée à chaque couche.</p></li> <li><p><strong>Formulaire</strong> : c'est l'élément qui offre à l'utilisateur la possibilité de saisir des données.</p></li></ul> <p><strong>Schéma</strong> :</p> <div class="schema" data-v-7604250c><div class="interface" data-v-7604250c><div class="menu" data-v-7604250c><div class="couches" data-v-7604250c></div><div class="légende" data-v-7604250c></div></div><div class="carte" data-v-7604250c></div><div class="formulaire" data-v-7604250c></div></div> <ul class="cartouche" data-v-7604250c><li data-v-7604250c><span class="symbole menu" data-v-7604250c></span>
            Menu
        </li><li data-v-7604250c><span class="symbole couches" data-v-7604250c></span>
            Couches
        </li><li data-v-7604250c><span class="symbole légende" data-v-7604250c></span>
            Légende
        </li><li data-v-7604250c><span class="symbole carte" data-v-7604250c></span>
            Carte
        </li><li data-v-7604250c><span class="symbole formulaire" data-v-7604250c></span>
            Formulaire
        </li></ul></div> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>Les éléments <strong>Légende</strong> et <strong>Formulaire</strong> sont rétractables et ne sont pas affichés au lancement de l'application.</p></div> <h3 id="fonctionnement"><a href="#fonctionnement" class="header-anchor">#</a> Fonctionnement</h3> <p>Développés <strong>indépendamment</strong> les uns des autres, les éléments de l'interface sont toutefois en mesure de manipuler des <strong>données communes</strong> grâce au module <strong>Vuex</strong> (cf. la section <a href="/projets/bourgs-centres.html#vue-js">#Vue.js</a>).</p> <p>Pour faire simple, Vuex crée un <strong>store</strong> permettant de stocker des données qui seront accessibles <strong>partout</strong> dans l'application.</p> <p>Cet aspect rend l'explication du fonctionnement plus simple :</p> <p>Au démarrage, les données utiles (couches, entités) sont <strong>récupérées</strong>, <strong>stockées</strong> dans le store et <strong>représentées</strong> sur la carte.</p> <p>L'utilisateur peut alors <strong>consulter</strong>, <strong>modifier</strong> ou <strong>supprimer</strong> des données existantes ou bien en <strong>créer</strong> de nouvelles.</p> <p>Lorsque il est satisfait du résultat, l'utilisateur peut fermer la fenêtre de son navigateur puisque tous les changement ont été <strong>immédiatement effectués</strong> dans la base de données.</p> <h2 id="cote-serveur"><a href="#cote-serveur" class="header-anchor">#</a> Côté serveur</h2> <p>Avant d'entreprendre le développement de l'application client, il fut nécessaire de mettre en place la <strong>partie serveur</strong>, reponsable de la <strong>gestion des données.</strong></p> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>La totalité du travail présenté ici a été réalisée sur un <strong>serveur de test.</strong></p> <p>Il n'y avait donc pas de vértiable risque, ce qui m'a permis de configurer toute la partie serveur moi-même.</p></div> <h3 id="administration-serveur"><a href="#administration-serveur" class="header-anchor">#</a> Administration serveur</h3> <p>Avant toute chose, j'ai commencé par configurer <strong>l'environnement technique</strong> du serveur de test :</p> <ul><li><p><strong>Mise à jour des outils</strong> : installation des dernières versions de <strong>QGIS</strong>, <strong>QGIS Server</strong> et <strong>PostGIS.</strong></p></li> <li><p><strong>Configuration du serveur Web</strong> : création d'un <strong>VirtualHost Apache</strong> et configuration de QGIS Server (cf. la <a href="/prerequis/qgis-server">présentation de QGIS Server</a>).</p></li> <li><p><strong>Administration de la base de données</strong> : création du <strong>schéma</strong> et des différentes <strong>tables</strong>.</p></li></ul> <h3 id="configuration-du-projet-qgis"><a href="#configuration-du-projet-qgis" class="header-anchor">#</a> Configuration du projet QGIS</h3> <p>L'environnement mis en place, j'ai pu créer le <strong>projet QGIS</strong> à partir duquel QGIS Server génèrera les <strong>Web services.</strong></p> <img src="/assets/img/projet_qgis.812ba8ed.png" title="Projet QGIS Bourgs-Centres" alt="qgis_bourgs-centres" data-align="center"> <h4 id="couches"><a href="#couches" class="header-anchor">#</a> Couches</h4> <p>On distingue deux groupes de couches au sein du projet :</p> <ul><li><p><strong>Fonds</strong> : couches de <strong>délimitation</strong> (limites administratives par exemple), <strong>fonds de carte</strong> ou <strong>photos aériennes.</strong></p></li> <li><p><strong>Catégories</strong> : les différentes <strong>thématiques</strong> pouvant être abordées par les Bourgs-Centres, telles que <strong>l'Éducation</strong>, la <strong>Santé</strong> ou le <strong>Tourisme</strong>.</p></li></ul> <p>Les couches au sein du groupe <strong>Catégories</strong> sont toutes des couches de <strong>type vectoriel</strong> puisque la totalité des entités du projet Bourgs-Centres seront représentées par des <strong>formes géométriques</strong> (cf. la <a href="/prerequis/qgis.html#notions">présentation de QGIS</a>).</p> <h4 id="styles"><a href="#styles" class="header-anchor">#</a> Styles</h4> <p>Sur la capture d'écran au-dessus, on peut distinguer que chaque couche possède sa propre liste de <strong>marqueurs</strong>, qu'elle attribue à ses entités en fonction de la <strong>valeur</strong> contenue dans leur champ <em>type</em>.</p> <p>Par exemple, dans le cas de la couche <em>Éducation</em>, les valeurs du champ <em>type</em> peuvent être :  <code>collège</code>, <code>crèche</code>, <code>école maternelle</code>, <code>école primaire</code> ou <code>lycée</code>.</p> <p>Chaque entité se verra donc attribuer le marqueur correspondant à la valeur contenue dans ce champ (cf. la <a href="/prerequis/qgis.html#styles">présentation de QGIS</a>).</p> <h4 id="publication-des-flux-wms-wfs"><a href="#publication-des-flux-wms-wfs" class="header-anchor">#</a> Publication des flux WMS/WFS</h4> <p>Afin que QGIS Server puisse être en mesure de générer des <strong>Web services</strong> depuis le projet QGIS, il est nécessaire d'y ajouter quelques <strong>configurations</strong> :</p> <ul><li><p><strong>Capacités des services</strong> : ensemble de <strong>métadonnées</strong> qui seront publiées dans la réponse des requêtes <em>GetCapabilities</em>.</p></li> <li><p><strong>Capacités WMS</strong> : réglage de <strong>l'emprise</strong> contenant les données à publier et du <strong>système de coordonées</strong> (SCR), <strong>exclusion</strong> de certaines couches (ici celles du groupe <strong>Fonds</strong>).</p></li> <li><p><strong>Capacités WFS</strong> : sélection des couches qui verront les données de leurs entités <strong>publiées</strong> et des <strong>opérations</strong> pouvant êtres réalisées sur ces dernières (Insertion, Mise à jour, Suppression).</p></li></ul> <p>Lorsque la configuration est terminée, il suffit d'enregister les modifications apportées au projet QGIS.</p> <p>Les données sont alors <strong>immédiatement disponibles</strong> via les flux WMS et WFS (cf. la <a href="/prerequis/qgis-server.html#flux-wms-wfs">présentation de QGIS Server</a>).</p> <h2 id="developpement"><a href="#developpement" class="header-anchor">#</a> Développement</h2> <p>Une fois la partie serveur implémentée, j'ai pu me consacrer au développement de <strong>l'application client.</strong></p> <p>Cette section présente la majeure partie du travail qui a été effecuté sur ce projet, puisque la totalité de l'application a été développé à partir de zéro.</p> <p>Pour commencer, je présenterai les <strong>principales technologies</strong> auxquelles j'ai pu avoir recours, en justifiant leur intêret dans ce projet.</p> <p>Enfin, je reviendrai en détail sur le <strong>développement</strong> de l'application, en illustrant les explications à l'aide <strong>d'extraits de code.</strong></p> <p>L'ordre de la présentation se base sur un cas d'utilisation classique de l'application, tel que décrit dans la section <a href="/projets/bourgs-centres.html#fonctionnement">#Fonctionnement</a>.</p> <h3 id="environnement-technologique"><a href="#environnement-technologique" class="header-anchor">#</a> Environnement technologique</h3> <p>J'ai décidé de choisir des technologies que je connaissais de part ma formation en <strong>Lience Professionnelle</strong> ou de part ma <strong>veille technologique</strong> personnelle, mais que je ne maitrisais pas.</p> <p>J'ai fait ce choix en étant convaincu que travailler sur un projet tel que celui-ci serait le meilleur moyen de <strong>monter en compétences</strong>, que ce soit au niveau de ces outils ou plus généralement sur la <strong>prise en main</strong> de nouvelles technologies.</p> <h4 id="vue-js"><a href="#vue-js" class="header-anchor">#</a> Vue.js</h4> <img src="data:image/png;base64,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" title="Logo Vue.js" alt="logo-vue" data-align="center"> <p><strong>Vue</strong> est un <a href="https://fr.wikipedia.org/wiki/Framework" target="_blank" rel="noopener noreferrer">framework<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> JavaScript <strong>open-source</strong> conçu pour constuire des <strong>interfaces utilisateur</strong>, voir la <a href="https://fr.vuejs.org/v2/guide/index.html" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>L'ayant découvert et apprécié au cours de ma formation en Licence Professionnelle, j'ai souhaité l'utiliser dans le cadre de ce projet.</p> <p><strong>Vue</strong> m'a permis de développer rapidement les <strong>composants</strong> qui forment les différentes parties de l'interface de l'application. Ces derniers sont définis dans des fichiers dotés de l'extension <code>.vue</code>, offrant la possiblité de déterminer la <strong>structure HTML</strong>, le <strong>comportement</strong> et le <strong>style</strong> :</p> <div class="language-vue extra-class"><pre class="language-vue"><code>// Hello.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bienvenue<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Bonjour {{ nom }} !<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            nom<span class="token operator">:</span> <span class="token string">&quot;Vue&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.bienvenue</span> <span class="token punctuation">{</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 2em<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #A2A2A2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p class="bienvenue code-block" data-v-7d920ba1>Bonjour Vue !</p> <p>L'une des forces de <strong>Vue</strong> et qu'il offre une possiblité de <strong>personnalisation totale.</strong></p> <p>Ainsi, de nombreux modules ont été développées pour venir ajouter des fonctionnalités.</p> <p>C'est le cas de <strong>Vuex</strong>, un module qui permet de gérer l'état (<strong>state</strong>) de nos applications, voir la <a href="https://vuex.vuejs.org/" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p><strong>Vuex</strong> crée un <strong>store</strong>, à partir duquel on peut définir un <strong>état initial</strong> et des méthodes permettant de <strong>changer</strong> cet état. Il est alors possible d'accéder à l'état du <strong>store</strong> et à ses méthodes depuis n'importe quel <strong>composant</strong> ou <strong>fichier</strong> JavaScript.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    count<span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>count<span class="token operator">++</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Dans notre cas, ce module a grandement facilité la <strong>transmission de données inter-composant</strong> puisque toutes les données liées aux couches et aux entités sont stockées dans le <strong>store.</strong></p> <h4 id="leaflet"><a href="#leaflet" class="header-anchor">#</a> Leaflet</h4> <img src="/assets/img/leaflet.2f524850.png" title="Logo Leaflet.js" alt="logo-leaflet" data-align="center"> <p>Pour ce qui est de l'affichage de la carte et des entités, j'ai choisi d'utiliser <strong>Leaflet</strong>, une librairie JavaScript open-source pour créer des <strong>cartes interactives</strong>, voir la <a href="https://leafletjs.com/examples/quick-start/" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <div id="mapid" data-v-3b863c68></div> <p>Ce choix s'est fait naturellement puisque <strong>Leaflet</strong> est de loin la meilleure librairie de cartographie <strong>open-source</strong> pour JavaScript, notamment grâce à son API très <strong>complète</strong> et <strong>simple</strong> à prendre en main.</p> <h4 id="axios"><a href="#axios" class="header-anchor">#</a> axios</h4> <p>Puisqu'il est nécessaire de pouvoir communiquer avec les <strong>Web services</strong> par le biais de <strong>requêtes HTTP</strong>, j'ai décidé de me service <strong>d'axios</strong>, un <strong>client HTTP</strong> JavaScript <strong>open-source</strong> basé sur le principe de <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Promise" target="_blank" rel="noopener noreferrer">Promise<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, voir la <a href="https://github.com/axios/axios" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>

axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://mon.url'</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">maData</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>maData<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">erreur</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Oups...'</span> <span class="token operator">+</span> erreur<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Il est vrai que j'aurai pu utiliser <a href="https://developer.mozilla.org/fr/docs/Web/API/XMLHttpRequest" target="_blank" rel="noopener noreferrer">l'API XMLHttpRequest<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> et créer mes propres fonctions, mais j'ai souhaité gagner du temps sur cette partie étant donné qu'il y avait déjà une charge de travail importante à fournir à d'autres niveaux.</p> <h4 id="xml-js"><a href="#xml-js" class="header-anchor">#</a> xml-js</h4> <p>Cette librairie gère la conversion <strong>XML vers JavaScript</strong> et inversement, voir la <a href="https://www.npmjs.com/package/xml-js" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> convert <span class="token keyword">from</span> <span class="token string">'xml-js'</span>

<span class="token keyword">const</span> xml <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;Name&gt;Hugo&lt;/Name&gt;
             &lt;namespace:Age&gt;21&lt;/bar:Age&gt;</span><span class="token template-punctuation string">`</span></span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span> compact<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> js <span class="token operator">=</span> convert<span class="token punctuation">.</span><span class="token function">xml2js</span><span class="token punctuation">(</span>xml<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>js<span class="token punctuation">)</span>
<span class="token comment">/*
{ 
  Name: { 
    _text: &quot;Hugo&quot; 
   }, 
   namespace:Age: { 
     _text: 21 
   } 
}
*/</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> convert <span class="token keyword">from</span> <span class="token string">'xml-js'</span>

<span class="token keyword">const</span> js <span class="token operator">=</span> <span class="token punctuation">{</span>
    _declaration<span class="token operator">:</span> <span class="token punctuation">{</span>
        _attributes<span class="token operator">:</span> <span class="token punctuation">{</span> version<span class="token operator">:</span> <span class="token string">&quot;1.0&quot;</span><span class="token punctuation">,</span> encoding<span class="token operator">:</span> <span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    rappel<span class="token operator">:</span> <span class="token punctuation">{</span>
        _attributes<span class="token operator">:</span> <span class="token punctuation">{</span> importance<span class="token operator">:</span> <span class="token string">&quot;haute&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        mission<span class="token operator">:</span> <span class="token punctuation">{</span> _text<span class="token operator">:</span> <span class="token string">&quot;Apprendre Vue.js&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        date<span class="token operator">:</span> <span class="token punctuation">{</span> _text<span class="token operator">:</span> <span class="token string">&quot;Maintenant !&quot;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span> compact<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> xml <span class="token operator">=</span> convert<span class="token punctuation">.</span><span class="token function">js2xml</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xml<span class="token punctuation">)</span>
<span class="token comment">/*  
    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
    &lt;rappel importance=&quot;haute&quot;&gt;
        &lt;mission&gt;Apprendre Vue.js&lt;/mission&gt;
        &lt;date&gt;Maintenant !&lt;/date&gt;
    &lt;/rappel&gt;
*/</span>
</code></pre></div><p>Elle s'est avérée être un complément indispensable à <strong>axios</strong> puisque dans le cas de requêtes <strong>POST</strong>, les flux WFS n'accèptent que des données au <strong>format XML.</strong></p> <p><strong>xml-js</strong> m'a donc grandement facilité la construction du <strong>corps</strong> de ces requêtes.</p> <h4 id="autre"><a href="#autre" class="header-anchor">#</a> Autre</h4> <p>J'ai également eu recours à d'autres librairies telles que <a href="https://lodash.com/" target="_blank" rel="noopener noreferrer">Lodash<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ou <a href="http://proj4js.org/" target="_blank" rel="noopener noreferrer">Proj4js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> pour quelques besoins précis.</p> <p>Ce ne sont donc pas des librairies majeures du projet, bien qu'elles jouent un rôle important.</p> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>L'utilisation de technologies <strong>open-source</strong> est très importante puisqu'elle s'inscrit comme un des fondements de la philosophie du service SIG.</p></div> <h3 id="strucutre"><a href="#strucutre" class="header-anchor">#</a> Strucutre</h3> <p>Le répertoire du projet suit la <strong>structure classique</strong> d'une application <strong>Vue</strong> :</p> <div class="language-bash extra-class"><pre class="language-bash"><code>-- bourgs-centres
  <span class="token operator">|</span>-- public
  <span class="token operator">|</span>-- src
    <span class="token operator">|</span>-- API
    <span class="token operator">|</span>-- assets
    <span class="token operator">|</span>-- components
    <span class="token operator">|</span>-- config
    <span class="token operator">|</span>-- models
    <span class="token operator">|</span>-- store
      <span class="token operator">|</span>-- modules
    <span class="token operator">|</span>-- tools
    <span class="token operator">|</span>-- App.vue
    <span class="token operator">|</span>-- main.js
</code></pre></div><ul><li><p><code>bourgs-centres</code> : racine du projet.</p></li> <li><p><code>public</code> : contient des fichiers statiques tels que <code>index.html</code> ou <code>favicon.ico</code>.</p></li> <li><p><code>src/API</code> : ensemble d'outils facilitant la communication avec les flux WMS/WFS.</p></li> <li><p><code>src/assets</code> : feuiles de style, images, vidéos et autres ressources.</p></li> <li><p><code>src/components</code> : le répertoire dans lequel on définit les composants (<code>*.vue</code>).</p></li> <li><p><code>src/config</code> : éléments de configuration (URL d'API, token, etc.)</p></li> <li><p><code>src/models</code> : classes permettant de manipuler les données plus facilement.</p></li> <li><p><code>src/store</code> : le répertoire lié à l'utilisation de <strong>Vuex</strong>.</p></li> <li><p><code>src/store/modules</code> : des modules permettant de découper le <strong>store</strong> en plusieurs parties.</p></li> <li><p><code>src/tools</code> : fonctions utiles qui facilitent certains traitements.</p></li> <li><p><code>src/App.vue</code> : composant principal de l'application.</p></li> <li><p><code>src/main.js</code> : point d'entrée de l'application.</p></li></ul> <h3 id="initialisation"><a href="#initialisation" class="header-anchor">#</a> Initialisation</h3> <p>L'initialisation regroupe les phases de <strong>démarrage</strong>, de <strong>récupération des données</strong> et <strong>d'affichage de l'interface.</strong></p> <p>En attendant que toutes ses tâches soient réalisées, l'utilisateur peut appercevoir une <strong>animation de chargement</strong> le laissant comprendre que l'application est entrain de charger :</p> <div id="loader" class="code-block" data-v-b180181c><div class="lds-ellipsis" data-v-b180181c><div data-v-b180181c></div><div data-v-b180181c></div><div data-v-b180181c></div><div data-v-b180181c></div></div></div> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>La durée moyenne de ce chargement est relativementement courte (maximum 2 secondes), il arrive même parfois que l'utilisateur n'ait pas le temps d'appercevoir l'animation.</p></div> <h4 id="demarrage"><a href="#demarrage" class="header-anchor">#</a> Démarrage</h4> <p>Cette phase très courte instancie <strong>Vue</strong> au sein de notre application et permet entre autre d'afficher l'animation de chargement et d'intègrer un <strong>store</strong> créé à l'aide du module <strong>Vuex</strong> :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// main.js</span>

<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'@/App'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'@/store'</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  store<span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="recuperation-des-donnees"><a href="#recuperation-des-donnees" class="header-anchor">#</a> Récupération des données</h4> <p>Dès lors que que la phase de démarrage et terminée, le composant principal de l'application envoie une instruction au <strong>store</strong> afin de lancer la phase de <strong>récupération des données</strong> :</p> <div class="language-vue extra-class"><pre class="language-vue"><code>// App.vue

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Loader</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>loading<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Menu</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Map</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Form</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>formVisible<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// [...]</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token string">'layer'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'getLayers'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getLayers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// [...]</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><p><code>methods</code> : un objet permettant de défnir les méthodes utilisables par un composant, voir la <a href="https://fr.vuejs.org/v2/guide/events.html" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></li> <li><p><code>mapActions</code> : une fonction propre à <strong>Vuex</strong> qui permet de lier une <strong>action du store</strong> aux <strong>méthodes d'un composant</strong>.</p></li> <li><p><code>mounted</code> : une méthode liée au <strong>cycle de vie</strong> d'un composant. Elle est appelée lorsque le composant est <strong>inséré</strong> dans l'arborescence, voir la <a href="https://fr.vuejs.org/v2/guide/instance.html#Diagramme-du-cycle-de-vie" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></li> <li><p><code>this.getLayers</code> : la méthode liée depuis le module <em>layer</em> du <strong>store</strong>.</p></li></ul> <p>Au sein du <strong>store</strong>, la méthode <code>getLayers</code> se charge d'effectuer des appels à des méthodes ayant recours à <strong>axios</strong> pour récupérer la <strong>liste des couches</strong> :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/API/WFS.js</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchLayers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>baseUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;REQUEST=GetCapabilities</span><span class="token template-punctuation string">`</span></span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token function">extractLayers</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>On effectue ensuite deux requêtes par couches, afin d'en récupérer les <strong>styles</strong> et la <strong>liste des entités</strong> existantes :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/API/WMS.js</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchStyles</span><span class="token punctuation">(</span><span class="token parameter">layer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>baseUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;REQUEST=GetStyles&amp;LAYERS=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>layer<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token function">extractStyles</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/API/WFS.js</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchFeatures</span><span class="token punctuation">(</span><span class="token parameter">layer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>baseUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;REQUEST=GetFeature&amp;TYPENAME=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>layer<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;OUTPUTFORMAT=GEOJSON</span><span class="token template-punctuation string">`</span></span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    <span class="token keyword">return</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>features<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">f</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        f<span class="token punctuation">.</span>coordinates <span class="token operator">=</span> <span class="token function">reverseCoordinates</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>coordinates<span class="token punctuation">)</span>
        <span class="token keyword">return</span> f
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Lorsque les données ont été récupérées, elles sont stockées dans le <strong>store</strong> afin d'être accessibles à n'importe quel endroit de l'application.</p> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>Toutes les requêtes HTTP sont effectuées en <strong>parallèle</strong> à l'aide de la méthode <code>Promise.all()</code>, sans quoi le temps de chargement serait bien plus long, voir la <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Promise/all" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <h4 id="affichage-de-l-interface"><a href="#affichage-de-l-interface" class="header-anchor">#</a> Affichage de l'interface</h4> <p>Après la phase de récupération des données, l'initialisation se termine par l'affichage de <strong>l'interface utilisateur.</strong></p> <p>Les trois composants principaux (cf. <a href="/projets/bourgs-centres.html#interface">#Interface</a>) se chargent de récupérer les données depuis le <strong>store</strong> afin de les <strong>transmettre</strong> aux sous-composants, permettant ainsi l'affichage des informations récupérées plus tôt.</p> <h3 id="todo"><a href="#todo" class="header-anchor">#</a> TODO</h3> <p>Ajouter ces parties dans le rapport :</p> <ul><li><p>Interactions utilisateur</p> <ul><li><p>Légende</p></li> <li><p>Création des représentations</p></li> <li><p>Formulaire (description de la couche)</p></li></ul></li> <li><p>Transactions</p> <ul><li><p>Construction du body (xml-js)</p></li> <li><p>Envoie et Réponse</p></li></ul></li></ul> <h2 id="a-venir"><a href="#a-venir" class="header-anchor">#</a> À venir</h2> <h3 id="demonstration"><a href="#demonstration" class="header-anchor">#</a> Démonstration</h3> <p>Démonstration de l'utilisation de l'application aux personnes en charge du projet.</p> <h3 id="gestion-des-utilisateurs"><a href="#gestion-des-utilisateurs" class="header-anchor">#</a> Gestion des utilisateurs</h3> <ul><li><p>Système de gestion des comptes utilisateurs</p></li> <li><p>Groupes utilisateurs</p></li> <li><p>Restreindre les données aux groupes associés</p></li></ul> <h3 id="deploiement"><a href="#deploiement" class="header-anchor">#</a> Déploiement</h3> <p>Réaliser un premier déploiement avant la fin de l'apprentissage afin d'avoir des premiers retours et apporter des corrections.</p> <h2 id="confinement-et-teletravail"><a href="#confinement-et-teletravail" class="header-anchor">#</a> Confinement et télétravail</h2> <p>Le développement de ce projet s'est retrouvé quelques peu bousculé par l'apparition du <strong>COVID-19.</strong></p> <p>En effet, avec les mesures prises par le gouvernement, je me suis retrouvé contraint de devoir travailler depuis la maison pedant près de <strong>2 mois.</strong></p> <p>Malheureusement, les premières semaines de confinement se sont transformées en <strong>pause forcée</strong> puisque le <strong>Conseil Départemental</strong> a priorisé, à juste titre, la continuité des <strong>services essentiels.</strong></p> <p>De ce fait, je n'ai pas pu avoir accès au VPN de mon lieu de travail avant la <strong>4ème semaine</strong> de confinement. Quand bien même, les conditions de travail n'était pas très adapté et il m'était difficile de poursuivre mon avancée de cette manière.</p> <p>Afin de pouvoir reprendre mon travail rapidement et sous l'accord de mon maître d'apprentissage, je me suis recréé un <strong>environnement de travail virtuel local</strong> grâce à <a href="https://docker.com" target="_blank" rel="noopener noreferrer">Docker<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Ce travail <strong>d'administration</strong> et de <strong>configuration serveur</strong> a pris au total <strong>une semaine.</strong></p> <p>Au total, ces <strong>4 semaines</strong> ne se sont pas avérées être un handicap puisque j'ai réussi à rattraper mon retard en gagnant du temps sur des tâches que j'avais imaginé plus longues.</p> <h2 id="conclusion-intermediaire"><a href="#conclusion-intermediaire" class="header-anchor">#</a> Conclusion intermédiaire</h2> <p>Je suis pour l'instant très satisfait de l'avancée de ce projet.</p> <p>La partie fonctionnelle est quasiment terminée, il n'y a plus que quelques erreurs mineures à corriger avant d'entamer le mise en page.</p> <p>Ce projet s'avère être très formateur car il me permet de découvrir et maîtiser de nouvelles technologies, mais également de monter en compétence en terme d'organisation et de communication.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/cartogis54/plugin.html" class="prev">
        CartoGIS54 - Plugin QGIS
      </a></span> <span class="next"><a href="/liens.html">
        Liens
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.95b712ba.js" defer></script><script src="/assets/js/2.823c70a3.js" defer></script><script src="/assets/js/5.f5201cba.js" defer></script><script src="/assets/js/4.871bcf60.js" defer></script><script src="/assets/js/7.f6f50e7f.js" defer></script><script src="/assets/js/8.09563207.js" defer></script><script src="/assets/js/9.ac035cd6.js" defer></script>
  </body>
</html>
