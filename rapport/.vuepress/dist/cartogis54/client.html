<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CartoGIS54 - Application client | Suivi d&#39;alternance</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css">
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
    <meta name="description" content="Ce rapport présentera l'institution et le service au sein desquels l'alternance a été réalisée.">
    <link rel="preload" href="/assets/css/0.styles.b54b7f1b.css" as="style"><link rel="preload" href="/assets/js/app.585f677d.js" as="script"><link rel="preload" href="/assets/js/2.25621a30.js" as="script"><link rel="preload" href="/assets/js/6.477c9701.js" as="script"><link rel="preload" href="/assets/js/5.1257138e.js" as="script"><link rel="preload" href="/assets/js/8.71c0e7a1.js" as="script"><link rel="preload" href="/assets/js/9.5bffacd4.js" as="script"><link rel="preload" href="/assets/js/10.a84ed7be.js" as="script"><link rel="prefetch" href="/assets/js/11.c3483099.js"><link rel="prefetch" href="/assets/js/12.5b8e5e0f.js"><link rel="prefetch" href="/assets/js/13.f51a0617.js"><link rel="prefetch" href="/assets/js/14.456db0f2.js"><link rel="prefetch" href="/assets/js/15.b61b254a.js"><link rel="prefetch" href="/assets/js/16.d56ee440.js"><link rel="prefetch" href="/assets/js/17.fd238609.js"><link rel="prefetch" href="/assets/js/18.1bd6d2e1.js"><link rel="prefetch" href="/assets/js/19.62f1f392.js"><link rel="prefetch" href="/assets/js/20.af1c8f38.js"><link rel="prefetch" href="/assets/js/21.e807520c.js"><link rel="prefetch" href="/assets/js/3.4803905f.js"><link rel="prefetch" href="/assets/js/4.f4ed8133.js"><link rel="prefetch" href="/assets/js/7.62ae0272.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b54b7f1b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Suivi d'alternance</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Accueil
</a></div><div class="nav-item"><a href="/presentation.html" class="nav-link">
  Présentation
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Prérequis" class="dropdown-title"><span class="title">Prérequis</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/prerequis/" class="nav-link">
  À propos
</a></li><li class="dropdown-item"><!----> <a href="/prerequis/qgis.html" class="nav-link">
  QGIS
</a></li><li class="dropdown-item"><!----> <a href="/prerequis/qgis-server.html" class="nav-link">
  QGIS Server
</a></li><li class="dropdown-item"><!----> <a href="/prerequis/lizmap.html" class="nav-link">
  Lizmap
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Projets annexes" class="dropdown-title"><span class="title">Projets annexes</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/projets-annexes/" class="nav-link">
  À propos
</a></li><li class="dropdown-item"><!----> <a href="/projets-annexes/modal.html" class="nav-link">
  Modal
</a></li><li class="dropdown-item"><!----> <a href="/projets-annexes/smc.html" class="nav-link">
  SMC
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CartoGIS54" class="dropdown-title"><span class="title">CartoGIS54</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cartogis54/" class="nav-link router-link-active">
  À propos
</a></li><li class="dropdown-item"><!----> <a href="/cartogis54/client.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Application client
</a></li><li class="dropdown-item"><!----> <a href="/cartogis54/plugin.html" class="nav-link">
  Plugin QGIS
</a></li></ul></div></div><div class="nav-item"><a href="/liens.html" class="nav-link">
  Liens
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Accueil
</a></div><div class="nav-item"><a href="/presentation.html" class="nav-link">
  Présentation
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Prérequis" class="dropdown-title"><span class="title">Prérequis</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/prerequis/" class="nav-link">
  À propos
</a></li><li class="dropdown-item"><!----> <a href="/prerequis/qgis.html" class="nav-link">
  QGIS
</a></li><li class="dropdown-item"><!----> <a href="/prerequis/qgis-server.html" class="nav-link">
  QGIS Server
</a></li><li class="dropdown-item"><!----> <a href="/prerequis/lizmap.html" class="nav-link">
  Lizmap
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Projets annexes" class="dropdown-title"><span class="title">Projets annexes</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/projets-annexes/" class="nav-link">
  À propos
</a></li><li class="dropdown-item"><!----> <a href="/projets-annexes/modal.html" class="nav-link">
  Modal
</a></li><li class="dropdown-item"><!----> <a href="/projets-annexes/smc.html" class="nav-link">
  SMC
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CartoGIS54" class="dropdown-title"><span class="title">CartoGIS54</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cartogis54/" class="nav-link router-link-active">
  À propos
</a></li><li class="dropdown-item"><!----> <a href="/cartogis54/client.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Application client
</a></li><li class="dropdown-item"><!----> <a href="/cartogis54/plugin.html" class="nav-link">
  Plugin QGIS
</a></li></ul></div></div><div class="nav-item"><a href="/liens.html" class="nav-link">
  Liens
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>CartoGIS54 - Application client</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cartogis54/client.html#introduction" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/cartogis54/client.html#analyse" class="sidebar-link">Analyse</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cartogis54/client.html#besoin" class="sidebar-link">Besoin</a></li><li class="sidebar-sub-header"><a href="/cartogis54/client.html#support" class="sidebar-link">Support</a></li><li class="sidebar-sub-header"><a href="/cartogis54/client.html#experience-utilisateur" class="sidebar-link">Expérience utilisateur</a></li><li class="sidebar-sub-header"><a href="/cartogis54/client.html#fonctionnalites" class="sidebar-link">Fonctionnalités</a></li></ul></li><li><a href="/cartogis54/client.html#solution-proposee" class="sidebar-link">Solution proposée</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cartogis54/client.html#interface-utilisateur" class="sidebar-link">Interface utilisateur</a></li><li class="sidebar-sub-header"><a href="/cartogis54/client.html#environnement-technologique" class="sidebar-link">Environnement technologique</a></li><li class="sidebar-sub-header"><a href="/cartogis54/client.html#strucutre" class="sidebar-link">Strucutre</a></li><li class="sidebar-sub-header"><a href="/cartogis54/client.html#configuration" class="sidebar-link">Configuration</a></li></ul></li><li><a href="/cartogis54/client.html#fonctionnement" class="sidebar-link">Fonctionnement</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cartogis54/client.html#initialisation" class="sidebar-link">Initialisation</a></li><li class="sidebar-sub-header"><a href="/cartogis54/client.html#interactions-avec-l-utilisateur" class="sidebar-link">Interactions avec l'utilisateur</a></li><li class="sidebar-sub-header"><a href="/cartogis54/client.html#transactions" class="sidebar-link">Transactions</a></li><li class="sidebar-sub-header"><a href="/cartogis54/client.html#modification-d-entite-existante" class="sidebar-link">Modification d'entité existante</a></li></ul></li><li><a href="/cartogis54/client.html#personnalisation" class="sidebar-link">Personnalisation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cartogis54/client.html#style" class="sidebar-link">Style</a></li><li class="sidebar-sub-header"><a href="/cartogis54/client.html#logo" class="sidebar-link">Logo</a></li><li class="sidebar-sub-header"><a href="/cartogis54/client.html#modales" class="sidebar-link">Modales</a></li></ul></li><li><a href="/cartogis54/client.html#developpement" class="sidebar-link">Développement</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cartogis54/client.html#confinement-et-teletravail" class="sidebar-link">Confinement et télétravail</a></li><li class="sidebar-sub-header"><a href="/cartogis54/client.html#evolution-du-projet" class="sidebar-link">Evolution du projet</a></li><li class="sidebar-sub-header"><a href="/cartogis54/client.html#difficultes-rencontrees" class="sidebar-link">Difficultés rencontrées</a></li><li class="sidebar-sub-header"><a href="/cartogis54/client.html#etat-d-avancement" class="sidebar-link">Etat d'avancement</a></li></ul></li><li><a href="/cartogis54/client.html#conclusion" class="sidebar-link">Conclusion</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="application-client"><a href="#application-client" class="header-anchor">#</a> Application client</h1> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>Le développement de l'application client représente la majeure partie du travail effectué sur ce projet.</p> <div class="custom-block tip"><p class="custom-block-title">Informations</p> <p><strong>Contexte</strong> : De plus en plus de Services Départementaux et de collectivités ont recours à des outils ou des logiciels SIG, l'idée est de développer un moyen permettant de leur fournir des applications Web rapidement.</p> <p><strong>Problème</strong> : Les applications Web de cartographie proposées par le Conseil Département peuvent s'avéer difficiles à prendre en main pour des utilisateurs novices.</p> <p><strong>Objectif</strong> : Développer une interface utilisateur simple d'utilisation, permettant de manipuler des géodonnées exposées par un fournisseur de flux WMS/WFS.</p> <p><strong>Technologies utilisées</strong> : JavaScript, Vue.js, Leaflet, axios.</p></div> <h2 id="analyse"><a href="#analyse" class="header-anchor">#</a> Analyse</h2> <p>La phase d'analyse fut essentielle pour assurer la bonne conduite de ce projet.</p> <p>En effet, grâce à liste des besoins émise par les différents services demandeurs de ce genre d'outils, nous avons été en mesure d'imaginer à quoi devait ressembler le produit fini.</p> <p>Cette vision nous a ensuite permis d'énumérer les fonctionnalités à implémenter et donc de définir l'environnement technologique de l'application.</p> <h3 id="besoin"><a href="#besoin" class="header-anchor">#</a> Besoin</h3> <p>L'objectif est de proposer une application de cartographie accessible à des utilisateurs novices, permettant à ces derniers de saisir des données.</p> <p>Le terme accessible est très important puisqu'il détermine la direction que doit prendre le projet du point de vue du support et de l'expérience utilisateur.</p> <p><img src="/assets/img/maquette.fc25eabd.png" alt="maquette-cartogis54"></p> <h3 id="support"><a href="#support" class="header-anchor">#</a> Support</h3> <p>De nos jours, le Web permet de créer des applications accessibles rapidement et facilement pour des utilisateurs novices puisqu'ils n'ont besoin que d'un appareil connecté à internet.</p> <p>Une application Web semble donc être le support adapté pour répondre au besoin.</p> <h3 id="experience-utilisateur"><a href="#experience-utilisateur" class="header-anchor">#</a> Expérience utilisateur</h3> <p>En terme d'expérience utilisateur, il est indispensable que cette dernière soit le plus simple possible. Pour cela, les actions de l'utilisateurs doivent être intuitives et peu nombreuses.</p> <p>L'objectif de l'application étant de localiser des projets d'aménagement et de fournir des informations à leur propos, il faut que la prise en main du mécanisme de localisation soit intuitive et rapide, et que la saisie des données se fasse via un formulaire simple.</p> <h3 id="fonctionnalites"><a href="#fonctionnalites" class="header-anchor">#</a> Fonctionnalités</h3> <p>L'analyse du besoin et de l'expérience utilisateur a servi à établir un liste de fonctionnalités minimales et indispensables permettant de proposer une première version d'application utilisable :</p> <ul><li><p><strong>Affichage des données</strong> : représenter les données en fonction de leur nature (point, ligne ou polygone) sur une carte dynamique.</p></li> <li><p><strong>Ajout, Modification, Suppression</strong> : implémenter les opérations indispensables à la saisie des données.</p></li> <li><p><strong>Saisie</strong> : proposer une interface permettant de saisir des données.</p></li> <li><p><strong>Persistence</strong> : établir la communication entre l'application client et le serveur afin de persister les données saisies.</p></li></ul> <h2 id="solution-proposee"><a href="#solution-proposee" class="header-anchor">#</a> Solution proposée</h2> <p>Voici une démonstration permettant de visualiser l'état d'avancement du projet :</p> <p><img src="/assets/img/preview.2cf90746.gif" alt="preview"></p> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>Cette démonstration présente une version en cours de développement.</p></div> <p>Cette section présente la majeure partie du travail qui a été effecuté sur ce projet, puisque la totalité de l'application a été développé à partir de zéro.</p> <p>Pour commencer, je présenterai l'interface utilisateur et son fonctionnement.</p> <p>Ensuite, je listerai les <strong>principales technologies</strong> auxquelles j'ai pu avoir recours, en justifiant leur intêret dans ce projet.</p> <p>Enfin, je reviendrai en détail sur le <strong>développement</strong> de l'application, en illustrant les explications à l'aide <strong>d'extraits de code.</strong></p> <h3 id="interface-utilisateur"><a href="#interface-utilisateur" class="header-anchor">#</a> Interface utilisateur</h3> <p>Elle peut être découpée en 4 éléments :</p> <ul><li><p><strong>En-tête</strong> : l'élément sur lequel peut-être affiché le logo de l'application et sur lequel on peut insérer des boutons permettant d'afficher des modals.</p></li> <li><p><strong>Carte</strong> : l'élément principal de l'application sur lequel sont représentées les données.</p></li> <li><p><strong>Menu</strong> : présentant la <strong>Liste des couches</strong> qui permet de visualiser celles qui sont disponibles, cet élément intègre également une <strong>Légende</strong> associée à chaque couche.</p></li> <li><p><strong>Formulaire</strong> : c'est l'élément qui offre à l'utilisateur la possibilité de saisir des données.</p></li></ul> <p><strong>Schéma</strong> :</p> <div class="schema" data-v-2473ece9><div class="interface" data-v-2473ece9><div class="header" style="min-height: 50px" data-v-2473ece9></div> <div class="main" data-v-2473ece9><div class="menu" data-v-2473ece9><div class="couches" data-v-2473ece9></div><div class="légende" data-v-2473ece9></div></div><div class="carte" data-v-2473ece9></div><div class="formulaire" data-v-2473ece9></div></div></div> <ul class="cartouche" data-v-2473ece9><li data-v-2473ece9><span class="symbole header" data-v-2473ece9></span>
            En-tête
        </li> <li data-v-2473ece9><span class="symbole menu" data-v-2473ece9></span>
            Menu
        </li><li data-v-2473ece9><span class="symbole couches" data-v-2473ece9></span>
            Couches
        </li><li data-v-2473ece9><span class="symbole légende" data-v-2473ece9></span>
            Légende
        </li><li data-v-2473ece9><span class="symbole carte" data-v-2473ece9></span>
            Carte
        </li><li data-v-2473ece9><span class="symbole formulaire" data-v-2473ece9></span>
            Formulaire
        </li></ul></div> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>Les éléments <strong>Légende</strong> et <strong>Formulaire</strong> sont rétractables et ne sont pas affichés au lancement de l'application.</p></div> <p>Développés <strong>indépendamment</strong> les uns des autres, les éléments de l'interface sont toutefois en mesure de manipuler des <strong>données communes</strong> grâce au module <strong>Vuex</strong> (cf. la section <a href="/cartogis54/client.html#vue-js">#Vue.js</a>).</p> <p>Pour faire simple, Vuex crée un <strong>store</strong> permettant de stocker des données qui seront accessibles <strong>partout</strong> dans l'application.</p> <p>Cet aspect rend l'explication du fonctionnement plus simple :</p> <p>Au démarrage, les données utiles (couches, entités) sont <strong>récupérées</strong>, <strong>stockées</strong> dans le store et <strong>représentées</strong> sur la carte.</p> <p>L'utilisateur peut alors <strong>consulter</strong>, <strong>modifier</strong> ou <strong>supprimer</strong> des données existantes ou bien en <strong>créer</strong> de nouvelles.</p> <p>Lorsque il est satisfait du résultat, l'utilisateur peut fermer la fenêtre de son navigateur puisque tous les changement ont été <strong>immédiatement effectués</strong> dans la base de données.</p> <h3 id="environnement-technologique"><a href="#environnement-technologique" class="header-anchor">#</a> Environnement technologique</h3> <p>Au niveau technologique, nous avons du choisir entre Lizmap ou un tout nouvel environnement technique.</p> <p>Après avoir pris le temps d'analyser les avantages et les inconvénients de chaque option, nous avons décidé de ne pas retenir Lizmap pour ce projet.</p> <p>Malgré les nombreux avantages proposés par cette solution, c'est sa difficulté de personnalisation qui lui a fait défaut (cf. <a href="/prerequis/lizmap">la présentation de Lizmap</a>).</p> <h4 id="nouveau-depart"><a href="#nouveau-depart" class="header-anchor">#</a> Nouveau départ</h4> <p>En ce qui concerne le nouvel environnement technologique, j'ai eu l'immense opportunité de choisir les technologies avec lesquelles je souhaitais travailler :</p> <ul><li><p><strong>Vue.js</strong> : construction de l'interface utilisateur.</p></li> <li><p><strong>Leaflet</strong> : affichage des données géospatiales sur une carte interactive.</p></li> <li><p><strong>axios</strong> : communication avec le serveur Web via des requêtes HTTP.</p></li></ul> <p>J'ai décidé de choisir des technologies que je connaissais de part ma formation en Lience Professionnelle ou de part ma veille technologique personnelle, mais que je ne maitrisais pas.</p> <p>J'ai fait ce choix en étant convaincu que travailler sur un projet tel que celui-ci serait le meilleur moyen de monter en compétences, que ce soit au niveau de ces outils ou plus généralement sur la prise en main de nouvelles technologies.</p> <h5 id="vue-js"><a href="#vue-js" class="header-anchor">#</a> Vue.js</h5> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAMAAAC3Ycb+AAACLlBMVEVMaXFBuINBuIM8enI/nnxBuINBuINBuIM8enJBuIM8enJBuINBuINBuIM8enJBuIM8enJBuINBuIM7eXFBuINBuIM8eXFBuINBuIM8eHFBuIM8eXFBuIM8eHBBuIM8eHBBuIM8d3BBuINBuIM8d3BBuINBuINBuIM8dnBBuINBuIM8dnBBuINBuIM7dXBBuINBuIM8dG9BuINBuIM8dG9BuIM8dG9BuINBuIM8c29BuINBuIM7cm5BuINBuIM7cW5BuIM7cW9BuINBuINBuIM7cW5BuINBuINBuIM7b21BuINBuIM6b21BuIM7bm1BuINBuIM7bW1BuINBuIM6bGxBuINBuIM6a2xBuIM6a2xBuINBuIM6amxBuIM6aWtBuINBuIM6aGpBuINBuIM6ZmpBuINBuIM5ZGlBuIM5Y2lBuINBuIM5YWhBuINBuIM5YGdBuIM4XmdBuINBuIM4XGZBuINBuIM4WmVBuIM3WGRBuIM3V2RBuINBuIM3VGNBuIM2UmI2UGFBuIM1TWA1SV41Sl41S141TF81TWA2T2A2UWE2U2I3VWM3WGQ4W2U4Xmc5YGc5YWg5ZGk6Zmo6Z2o6aGo6a2w7bW07bm07cG48c287dnA7eHA8enI8fHI9fnM8gXM9g3Q9hnU9iXY+i3c+jHc+j3g+kXk+lHo/l3o/mXs+m3s/nnw/oH0/o31Apn5BqH5Aqn9BrH9BroBBr4BCsYBBs4FBtoJCt4JBuIP7mHZoAAAAhHRSTlMAAQICAwQHCAgLDQ4QEhIVFhcaGh4hIiUoKissLzEzNDc4Oj4/QERFRkhLTVBTVldaXV5iYmZnaW1vcHV3eHx8gIGDhIeJio+Sk5aZm52foaWmqKyusLS1t7m6u7y/wMLHx8zP0NPW1trc3uLi5Obn6urt7+/y8/T29vf4+vv7/P39/v7L5yYnAAAKeElEQVR42uzBgQAAAADDoPtTH2TVAAAAAAAAAAAAAMg6NfegXmu6BVG4tm3btm3btm1bM3bOtm17Xt1pu5OlkfT3v7cxnqp1zio0SFovlZleaQYp/O6odWp90VGv0wxyWGXmsEHSXjvqYmtplrNuGGWKysgUo9xw1ixJ9Q456kOWQc7WVJmoedYgWR8cdaieJI101gOjrFCZWGGU+84aqZ9U2eqob3kGudRG4rW5ZJC8b47aWkU/6+Gs50bZIfF2GOW5s3roV0ud9T+jDBZusFGKnbVUv2l22lFv0w1yrJJglY4ZJP2to0430++mOuuWUWYLNtsot5w1VX+otd9Rn3MMcr6RUI3OGyT7s6P219KfDHLWI6NsEGqDUR45a5D+rOJGR33LN0hGZ4E6Zxgk/5ujNlbUX3R01kuj7BNon1FeOquj/ma+s64aZbQwo41y1Vnz9XcNjzvqfaZBTlUXpPopg2S+d9TxhvqHsc66a5TFgiw2yl1njdU/VdvpqK+5BslqKkTTLIPkfnHUzmr6F32c9dQo24TYZpSnzuqjf7XGWUUGSesrQN80gxQ5a43+XetzjnoTVs0Nttuea60SzIx+zY1it52pktSBa+5HrubWVYrqct32I9xt66hEw4OtuauVotVGeeCs4SpZuDU3s51S0i4z1G67pYpK0S3YmrtbKdkdbLftqlItcdZlowxVCoYa5bKzlqh0TeCa+y7DICeqKGlVThgk4x3cbZsohsnOum2UuUraXKPcdtZkxVJrL1xzsw1yoZGS1OhCqN12bw3FNDA6NTf63XagYquw3lHfCwyS3l1J6Z5ukILvjlpfQXFo76xXRjmgpBwwyitntVdc5jnrmlHGKQnjjHLNWfMUn4ZHAxgoADWX7rZZcLc92lBxGuOse3zN/S+67T1njVG8qoZbc1soQS24bvsV7rZVFbfeznrG19zod9veSsAqZxXzNbe8u22xs1YqES3DrbmVlIBKXLd9A3fblkrIdGfdNMoMJWCGUW46a7oSU+egoz5lG+R8XcWtLjc++OSog3WUoGHB1ty1itvaYLvtMCWqypZgBwodFKcOwY4PtlRWwro460X519zdRnnhrC5KwiJnXTHKCMVlhFGuOGuRktHkZLRrbrjd9mQTJWWSs+4YZYHisCDYbjtRyamxx1FfcrCa21QxNcW6bc4XR+2poST1d9Zjo2xWTJuN8thZ/ZW44GtuL8XQK+Rum7S2wd7NHSi3bpsGd9uLbZWCOc66bpQJKtUEo1x31hylosGRaN7NhXsad6SBUjLKWfeNskylWBZstx2l1FTdDtfcPINktVKJWmUZJA/utturKkU9g625O8rjNO6Zs3oqZcuDrbkDVIIBwXbb5Upd8zNRu5sL9zTuTHMBpgV7Nzcjat12mgi19wdbc+vrX9QPttvuryXEEGc9LNuBwgajPHTWEDEqborS3Vy4p3GbKgrSKUp3c7uDPY3rJMzCYO/mRkSn2y4Up/FxuubSAwV+fEB32+ONBRoffs2lu+0dZ40XqdouR32B7+bCP43bVU2ofs56wtdctts+cVY/sX5g7w4wAoECKIoaALPuwRACIZIgEATR7trEw/ndf7fxeOcPjof52Nc4Hg/zsa9tPB7mY1/bfDzMx76m+XiYj31t8/EwH/ua5uNhPva1zMfDfOxrmY+H+djXNB8POwP7WjfHw3Zrro99TfPxMB/7mubjYT72tc3Hw3zsa5uPh/nY1zQfD/Oxr20+HuZjX9N8PMzHvrb5eJiPfU3z8TAf+9rm42E+9rXNx8N87Guaj4f52Nc2Hw/zsa/AmtvabX08zMe+9vl4mI997fPxMB/7muXjYT72NcjHw1jsa7/bHoyH+djXPvpuzj+N2+bjYT72tc3Hw3zsa5qPh/nY1zYfD/Oxr2k+HuZjX9t8PMzHvqb5eJiPfW3z8TAf+9rm42E+9jXKx8N87GuQj4f52NcgHw/zsa9BPh4GY19AAB7mYF9AAB4GYV9AAB7mYF9AAB4GYV9AAB6GY193zQ3sthIeBmNfQAAe5mBfQAAeBmFfQAAe5mBfQAAeBmFfQAAe5mBfQAAe5mBfQAAeBmFfQAAe5mBfQAAeBmFfQAAe5mBfQAAeBmFfQAAe5mBfQAAe5mBfQAAeBmFfQAAe5mBfQAAeBmFfQAAepmNfg3w8bNDjN459hfCwM7CvEh52AvaVwsNOwb58PGzWG4V93bs5/zSuhYf52FcLD/Oxrxge5mNfLTzMx75ieJiPfbXwMB/7iuFhPvbVwsN87KuFh/nYVwwP87GvFh7mY18xPOzhy8e+UniYj3218DAf+2rhYT72FcPDfOyrhYf52FcAD0Owr7vm3t3Wx8N87KuFh/nYVwsP87GvGB7mY18tPMzHvgJ4mIt93bs5/zQuhof52FcLD/OxrxYe9v/Tx75SeJiPfbXwMB/7+j142HsO+/LxsBj25eNhNezLx8Ni2JePh9WwLx8Pi2FfPh5Ww758PKyGffl4WAz78vGw87GvCB724mNfATwsgH35eJiGfd019+62Ph7278PHvlJ4mI99ZfCwAPbl42GvNezLx8Nq2JePh9WwLx8Pi2FfPh7Wwr58POzZxr78/u7xsBj25eNhMezLx8Ni2JePhx2IfQXwsCcf+0rhYT72FcPDfOyrhYf52FcMD8OxL781HuZjXzE8zMe+aniYj33F8DAf+yrhYRj2de/m7mmciIf52FcND/Oxrxge5mNfDTwMw77umnt3WxcP87GvGB7mY181PMzHvkp4mI99BfCwn/bu6UoSAACi6CqPtW2NbZtxdnaTRON93JdGnVMX9tXCw2BfMTwM9tXCw2BfLTwM9hXDw2BfLTwM9hXDw2BfUTwM9pVec+22Q+jVYAjFsC94WAv7gofFsC94WAv7gofFsC94WAD7cjfnNK6Ch8G+WngY7CuGh8G+WngY7CuJh/WxL3gY7GvYXQyGUAD7gofBvgJ4GOyrhof1sS94GOxr2D0aAh4WwL7gYbCvBh7Wx77gYbCvYbcwGEIB7AseFsC+4GGwr8Caa7dt4GGwrxYeBvuK4WGwrxYeBvuK4WGwrxYeBvtq4WGwrxgeBvuq4WGwr8DdnNO4Kh4G+4rhYbCvFh4G+2rhYbCvHh7Wx77gYX3sCx7Wx77gYbCvYXcL+6rhYS3sS5uwrzAeFsC+9K+Gfbmba53G6W0M+9IJ7KuGh7WwL63UsC9rbmu31XfYVw0Pa2FfehbDvrRXw77gYS3sSzM17Ase1sK+9DGGfem6hn3Bw1rYlzZq2Bc8rIV96U8Y+7Lm2m0DvYphXzquYV/wsBb2paUa9gUPa2Ff+hbGvtzNOY0L9AT2FWsX9hXGw2BfgaZhX2E8DPYV6APsK9YF7CuMh8G+Aq3BvsJ4GOwr0G/YVxgPg30Fegn7inUI+wrjYbCvQAuwrzAeBvsK9AX21V9z7bYZPAz2FWgb9hXGw2Bfgf7DvsJ4GOwr0DvYV6wz2FcXD4N9FVqFfVXv5pzGNfrZxL7gYbCvSs9hX7EOetgXPAz2VWquhn3Bw2BfrT7DviRJkiRJkiRJkiRJkiRJkiQNszucKAuToL+DiQAAAABJRU5ErkJggg==" alt="logo-vue"></p> <p><strong>Vue</strong> est un <a href="https://fr.wikipedia.org/wiki/Framework" target="_blank" rel="noopener noreferrer">framework<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> JavaScript <strong>open-source</strong> conçu pour constuire des <strong>interfaces utilisateur</strong>, voir la <a href="https://fr.vuejs.org/v2/guide/index.html" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>L'ayant découvert et apprécié au cours de ma formation en Licence Professionnelle, j'ai souhaité l'utiliser dans le cadre de ce projet.</p> <p><strong>Vue</strong> m'a permis de développer rapidement les <strong>composants</strong> qui forment les différentes parties de l'interface de l'application. Ces derniers sont définis dans des fichiers dotés de l'extension <code>.vue</code>, offrant la possiblité de déterminer la <strong>structure HTML</strong>, le <strong>comportement</strong> et le <strong>style</strong> :</p> <div class="language-vue extra-class"><pre class="language-vue"><code>// Hello.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bienvenue<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Bonjour {{ nom }} !<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            nom<span class="token operator">:</span> <span class="token string">&quot;Vue&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.bienvenue</span> <span class="token punctuation">{</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 2em<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #A2A2A2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p class="bienvenue code-block" data-v-7d920ba1>Bonjour Vue !</p> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>Afin de comprendre comment fonctionnent les <strong>composants</strong>, n'hésitez pas à consutler la <a href="https://fr.vuejs.org/v2/guide/index.html#Composer-avec-des-composants" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Par la suite, lorsque de extraits de codes seront présentés, nous ne reviendrons pas sur les principes de bases des <strong>composants</strong>.</p></div> <p>L'une des forces de <strong>Vue</strong> et qu'il offre une possiblité de <strong>personnalisation totale.</strong></p> <p>Ainsi, de nombreux modules ont été développées pour venir ajouter des fonctionnalités.</p> <p>C'est le cas de <strong>Vuex</strong>, un module qui permet de gérer l'état (<strong>state</strong>) de nos applications, voir la <a href="https://vuex.vuejs.org/" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p><strong>Vuex</strong> crée un <strong>store</strong>, à partir duquel on peut définir un <strong>état initial</strong> et des méthodes permettant de <strong>changer</strong> cet état. Il est alors possible d'accéder à l'état du <strong>store</strong> et à ses méthodes depuis n'importe quel <strong>composant</strong> ou <strong>fichier</strong> JavaScript.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    count<span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>count<span class="token operator">++</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Dans notre cas, ce module a grandement facilité la <strong>transmission de données inter-composant</strong> puisque toutes les données liées aux couches et aux entités sont stockées dans le <strong>store.</strong></p> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>Afin de comprendre comment fonctionne de <strong>Vuex</strong>, n'hésitez pas à consutler la <a href="https://vuex.vuejs.org/" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Par la suite, lorsque de extraits de codes seront présentés, nous ne reviendrons pas sur les principes de bases de <strong>Vuex</strong>.</p></div> <h5 id="leaflet"><a href="#leaflet" class="header-anchor">#</a> Leaflet</h5> <p><img src="/assets/img/leaflet.2f524850.png" alt="logo-leaflet"></p> <p>our ce qui est de l'affichage de la carte et des entités, j'ai choisi d'utiliser <strong>Leaflet</strong>, une librairie JavaScript open-source pour créer des <strong>cartes interactives</strong>, voir la <a href="https://leafletjs.com/examples/quick-start/" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <div id="mapid" data-v-3b863c68></div> <p>Ce choix s'est fait naturellement puisque <strong>Leaflet</strong> est de loin la meilleure librairie de cartographie <strong>open-source</strong> pour JavaScript, notamment grâce à son API très <strong>complète</strong> et <strong>simple</strong> à prendre en main.</p> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>Afin de comprendre comment fonctionne de <strong>Leaflet</strong>, n'hésitez pas à consutler la <a href="https://leafletjs.com/" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Par la suite, lorsque de extraits de codes seront présentés, nous ne reviendrons pas sur les principes de bases de <strong>Leaflet</strong>.</p></div> <h5 id="axios"><a href="#axios" class="header-anchor">#</a> axios</h5> <p>Puisqu'il est nécessaire de pouvoir communiquer avec les <strong>Web services</strong> par le biais de <strong>requêtes HTTP</strong>, j'ai décidé de me service <strong>d'axios</strong>, un <strong>client HTTP</strong> JavaScript <strong>open-source</strong> basé sur le principe de <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Promise" target="_blank" rel="noopener noreferrer">Promise<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, voir la <a href="https://github.com/axios/axios" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>

axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://mon.url'</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">maData</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>maData<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">erreur</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Oups...'</span> <span class="token operator">+</span> erreur<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Il est vrai que j'aurai pu utiliser <a href="https://developer.mozilla.org/fr/docs/Web/API/XMLHttpRequest" target="_blank" rel="noopener noreferrer">l'API XMLHttpRequest<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ou <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch" target="_blank" rel="noopener noreferrer">l'API fetch<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> et créer mes propres fonctions, mais j'ai souhaité gagner du temps sur cette partie étant donné qu'il y avait déjà une charge de travail importante à fournir à d'autres niveaux.</p> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>Afin de comprendre comment fonctionne de <strong>axios</strong>, n'hésitez pas à consutler la <a href="https://github.com/axios/axios/blob/master/README.md" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Par la suite, lorsque de extraits de codes seront présentés, nous ne reviendrons pas sur les principes de bases de <strong>axios</strong>.</p></div> <h4 id="xml-js"><a href="#xml-js" class="header-anchor">#</a> xml-js</h4> <p>Cette librairie gère la conversion <strong>XML vers JavaScript</strong> et inversement, voir la <a href="https://www.npmjs.com/package/xml-js" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> convert <span class="token keyword">from</span> <span class="token string">'xml-js'</span>

<span class="token keyword">const</span> xml <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;Name&gt;Hugo&lt;/Name&gt;
             &lt;namespace:Age&gt;22&lt;/namespace:Age&gt;</span><span class="token template-punctuation string">`</span></span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span> compact<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> js <span class="token operator">=</span> convert<span class="token punctuation">.</span><span class="token function">xml2js</span><span class="token punctuation">(</span>xml<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>js<span class="token punctuation">)</span>
<span class="token comment">/*
{ 
  Name: { 
    _text: &quot;Hugo&quot; 
   }, 
   namespace:Age: { 
     _text: 22
   } 
}
*/</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> convert <span class="token keyword">from</span> <span class="token string">'xml-js'</span>

<span class="token keyword">const</span> js <span class="token operator">=</span> <span class="token punctuation">{</span>
    _declaration<span class="token operator">:</span> <span class="token punctuation">{</span>
        _attributes<span class="token operator">:</span> <span class="token punctuation">{</span> version<span class="token operator">:</span> <span class="token string">&quot;1.0&quot;</span><span class="token punctuation">,</span> encoding<span class="token operator">:</span> <span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    rappel<span class="token operator">:</span> <span class="token punctuation">{</span>
        _attributes<span class="token operator">:</span> <span class="token punctuation">{</span> importance<span class="token operator">:</span> <span class="token string">&quot;haute&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        mission<span class="token operator">:</span> <span class="token punctuation">{</span> _text<span class="token operator">:</span> <span class="token string">&quot;Apprendre Vue.js&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        date<span class="token operator">:</span> <span class="token punctuation">{</span> _text<span class="token operator">:</span> <span class="token string">&quot;Maintenant !&quot;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span> compact<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> xml <span class="token operator">=</span> convert<span class="token punctuation">.</span><span class="token function">js2xml</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xml<span class="token punctuation">)</span>
<span class="token comment">/*  
    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
    &lt;rappel importance=&quot;haute&quot;&gt;
        &lt;mission&gt;Apprendre Vue.js&lt;/mission&gt;
        &lt;date&gt;Maintenant !&lt;/date&gt;
    &lt;/rappel&gt;
*/</span>
</code></pre></div><p>Elle s'est avérée être un complément indispensable à <strong>axios</strong> puisque dans le cas de requêtes <strong>POST</strong>, les flux WFS n'accèptent que des données au <strong>format XML.</strong></p> <p><strong>xml-js</strong> m'a donc grandement facilité la construction du <strong>corps</strong> de ces requêtes.</p> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>Afin de comprendre comment fonctionne de <strong>xml-js</strong>, n'hésitez pas à consutler la <a href="https://github.com/nashwaan/xml-js/blob/master/README.md" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Par la suite, lorsque de extraits de codes seront présentés, nous ne reviendrons pas sur les principes de bases de <strong>xml-js</strong>.</p></div> <h4 id="autre"><a href="#autre" class="header-anchor">#</a> Autre</h4> <p>J'ai également eu recours à d'autres librairies telles que <a href="https://lodash.com/" target="_blank" rel="noopener noreferrer">Lodash<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ou <a href="http://proj4js.org/" target="_blank" rel="noopener noreferrer">Proj4js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> pour quelques besoins précis.</p> <p>Ce ne sont donc pas des librairies majeures du projet, bien qu'elles jouent un rôle important.</p> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>L'utilisation de technologies <strong>open-source</strong> est très importante puisqu'elle s'inscrit comme un des fondements de la philosophie du service SIG.</p></div> <h3 id="strucutre"><a href="#strucutre" class="header-anchor">#</a> Strucutre</h3> <p>Le répertoire du projet suit la <strong>structure classique</strong> d'une application <strong>Vue</strong> :</p> <div class="language-bash extra-class"><pre class="language-bash"><code>-- CartoGIS54/
  <span class="token operator">|</span>-- public/
  <span class="token operator">|</span>-- src/
    <span class="token operator">|</span>-- API/
    <span class="token operator">|</span>-- assets/
    <span class="token operator">|</span>-- components/
    <span class="token operator">|</span>-- layouts
    <span class="token operator">|</span>-- config/
    <span class="token operator">|</span>-- modals/
    <span class="token operator">|</span>-- models/
    <span class="token operator">|</span>-- store/
      <span class="token operator">|</span>-- modules/
    <span class="token operator">|</span>-- tools/
    <span class="token operator">|</span>-- App.vue
    <span class="token operator">|</span>-- README.md
    <span class="token operator">|</span>-- app.config.json
    <span class="token operator">|</span>-- main.js
</code></pre></div><ul><li><p><code>CartoGIS54</code> : racine du projet.</p></li> <li><p><code>public</code> : contient des fichiers statiques tels que <code>index.html</code> ou <code>favicon.ico</code>.</p></li> <li><p><code>src/API</code> : des fonctions facilitant les requêtes HTTP vers le serveur de flux WMS/WFS.</p></li> <li><p><code>src/assets</code> : feuiles de style, images, vidéos et autres ressources.</p></li> <li><p><code>src/components</code> : le répertoire dans lequel on définit les composants (fichiers <code>*.vue</code>).</p></li> <li><p><code>src/modals</code> : regroupe les fichiers définissant le contenu à insérer dans les modals.</p></li> <li><p><code>src/models</code> : classes permettant de représenter des entités (Layer ou Feature).</p></li> <li><p><code>src/store</code> : le répertoire lié à l'utilisation de <strong>Vuex</strong>.</p></li> <li><p><code>src/store/modules</code> : des modules permettant de scinder le <strong>store</strong> en plusieurs parties.</p></li> <li><p><code>src/tools</code> : fonctions utiles qui facilitent certains traitements.</p></li> <li><p><code>src/App.vue</code> : composant principal de l'application.</p></li> <li><p><code>app.config.json</code> : fichier de configuration de l'application.</p></li> <li><p><code>src/main.js</code> : point d'entrée de l'application.</p></li></ul> <h3 id="configuration"><a href="#configuration" class="header-anchor">#</a> Configuration</h3> <p>Pour rendre l'application générique et capable de s'intégrer dans plusieurs projets, il est nécessaire de fournir un moyen de configurer l'application.</p> <p>Toute la configuration peut être définie au sein du fichier <code>src/app.config.json</code>.</p> <h4 id="structure-du-fichier"><a href="#structure-du-fichier" class="header-anchor">#</a> Structure du fichier</h4> <p><strong><code>src/app.config.json</code></strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;server&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;host&quot;</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
        <span class="token property">&quot;queryParams&quot;</span><span class="token operator">:</span> object<span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;header&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;brand&quot;</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
        <span class="token property">&quot;modals&quot;</span><span class="token operator">:</span> object<span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;form&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;inputDate&quot;</span><span class="token operator">:</span> object<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;inputNumber&quot;</span><span class="token operator">:</span> object<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;inputRange&quot;</span><span class="token operator">:</span> object<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;inputText&quot;</span><span class="token operator">:</span> object<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;selectBox&quot;</span><span class="token operator">:</span> object<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;textArea&quot;</span><span class="token operator">:</span> object<span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>server</code></li></ul> <p>Cette section est utilisée pour indiquer à l'application où et comment envoyer les requêtes HTTP permettant de récupérer ou modifier les données.</p> <ul><li><code>header</code></li></ul> <p>Cette secion sert à fournir une URL vers une image pouvant être utilisée comme logo au sein de <strong>l'En-tête</strong> et offre également la possibilité de configurer les modals à y insérer.</p> <ul><li><code>form</code></li></ul> <p>Cette section permet de personaliser le composant <strong>Formulaire</strong> de l'interface afin de la rendre plus agréable pour l'utilisateur.</p> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>Pour plus d'informations à propos de la configuration de l'application, vous pouvez lire la <a href="https://github.com/infogeo54/CartoGIS54/blob/master/src/README.md" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (Anglais).</p></div> <h2 id="fonctionnement"><a href="#fonctionnement" class="header-anchor">#</a> Fonctionnement</h2> <p>Cette séction détaille la manière dont l'application fonctionne et communique avec le serveur de flux WMS/WFS.</p> <h3 id="initialisation"><a href="#initialisation" class="header-anchor">#</a> Initialisation</h3> <p>L'initialisation regroupe les phases de <strong>démarrage</strong>, de <strong>récupération des données</strong> et <strong>d'affichage de l'interface.</strong></p> <p>En attendant que toutes ses tâches soient réalisées, l'utilisateur peut appercevoir une <strong>animation de chargement</strong> le laissant comprendre que l'application est entrain de charger :</p> <div id="loader" class="code-block" data-v-b180181c><div class="lds-ellipsis" data-v-b180181c><div data-v-b180181c></div><div data-v-b180181c></div><div data-v-b180181c></div><div data-v-b180181c></div></div></div> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>La durée moyenne de ce chargement est relativementement courte (maximum 2 secondes), il arrive même parfois que l'utilisateur n'ait pas le temps d'appercevoir l'animation.</p></div> <h4 id="demarrage"><a href="#demarrage" class="header-anchor">#</a> Démarrage</h4> <p>Cette phase très courte instancie <strong>Vue</strong> au sein de notre application et permet entre autre d'intègrer un <strong>store</strong> créé à l'aide du module <strong>Vuex</strong> :</p> <p><strong><code>src/main.js</code></strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'@/App'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'@/store'</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  store<span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="recuperation-des-donnees"><a href="#recuperation-des-donnees" class="header-anchor">#</a> Récupération des données</h4> <p>Dès lors que que la phase de démarrage et terminée, le composant principal de l'application appelle une des actions du <strong>store</strong> afin de lancer la phase de <strong>récupération des données</strong> :</p> <p><strong><code>src/App.vue</code></strong></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- &lt;template&gt;&lt;/template&gt; ---&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">/* [...] */</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token string">'layer'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'getLayers'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getLayers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/* [...] */</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- &lt;style&gt;&lt;/style&gt; ---&gt;</span>
</code></pre></div><ul><li><code>mapActions()</code> : permet d'intégrer des <strong>actions du store</strong> parmis les <strong>méthodes</strong> d'un composant.</li></ul> <p>L'action <code>getLayers()</code> a pour objectif de récupérer la liste et la structure des couches en faisant appel à une fonctions permettant de communiquer avec le serveur.</p> <p>Une fois la liste des couches récupérées, <code>getLayers()</code> la parcourt fait appel à deux nouvelles fonctions par couches afin de récupérer, pour chacune d'entre elle, les <strong>styles</strong> et la <strong>liste des entités</strong> existantes :</p> <p><strong><code>src/store/modules/layers.js</code></strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* [...] */</span>
actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">/* [...] */</span>
    <span class="token function-variable function">getLayers</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> layerList <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">WFS</span><span class="token punctuation">.</span><span class="token function">fetchLayers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Récupération de la liste des couches</span>
        <span class="token keyword">const</span> descriptionList <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">WFS</span><span class="token punctuation">.</span><span class="token function">fetchAllFeatureDescriptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Récupération de la structure de chaque couche</span>
        <span class="token keyword">const</span> layers <span class="token operator">=</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>
            layerList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">layerData</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> name <span class="token operator">=</span> layerData<span class="token punctuation">[</span><span class="token string">'Name'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'_text'</span><span class="token punctuation">]</span>
                <span class="token keyword">const</span> description <span class="token operator">=</span> descriptionList<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>layer <span class="token operator">===</span> name<span class="token punctuation">)</span>
                <span class="token keyword">const</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Layer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>properties<span class="token operator">:</span> layerData<span class="token punctuation">,</span> description<span class="token operator">:</span> description<span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token keyword">await</span> layer<span class="token punctuation">.</span><span class="token function">getStyles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Récupération des styles</span>
                <span class="token keyword">await</span> layer<span class="token punctuation">.</span><span class="token function">getFeatures</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Récupération des entités</span>
                <span class="token keyword">return</span> layer
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'setList'</span><span class="token punctuation">,</span> layers<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">/* [...] */</span>
<span class="token punctuation">}</span>
<span class="token comment">/* [...] */</span>
</code></pre></div><p><strong><code>src/API/WFS.js</code></strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchLayers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>baseUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;REQUEST=GetCapabilities</span><span class="token template-punctuation string">`</span></span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token function">extractLayers</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong><code>src/API/WMS.js</code></strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchStyles</span><span class="token punctuation">(</span><span class="token parameter">layer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>baseUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;REQUEST=GetStyles&amp;LAYERS=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>layer<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token function">extractStyles</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong><code>src/API/WFS.js</code></strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchFeatures</span><span class="token punctuation">(</span><span class="token parameter">layer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>baseUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;REQUEST=GetFeature&amp;TYPENAME=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>layer<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;OUTPUTFORMAT=GEOJSON</span><span class="token template-punctuation string">`</span></span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    <span class="token keyword">return</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>features<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">f</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        f<span class="token punctuation">.</span>coordinates <span class="token operator">=</span> <span class="token function">reverseCoordinates</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>coordinates<span class="token punctuation">)</span>
        <span class="token keyword">return</span> f
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>A partir des données des couches récupérées depuis les WebServices, l'action <code>getLayers</code> instancie des objets JavaScript représentant une couche afin de rendre les données plus facilement manipulables :</p> <p><strong>Structure d'un objet <code>Layer</code></strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> string
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
  <span class="token property">&quot;features&quot;</span><span class="token operator">:</span> Layer<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;styles&quot;</span><span class="token operator">:</span> object<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>properties.name</code> : le nom de la couche tel qu'il est indiqué dans le projet QGIS et dans la base de données.</li> <li><code>properties.title</code> : le titre de la couche tel qui sera affiché dans l'interface utilisateur.</li> <li><code>description</code> : la définition de la structure de la couche (nom et type des champs).</li> <li><code>features</code> : la liste des entités rattachées à la couche.</li> <li><code>styles</code> : les différents types d'entités pouvant être créées dans la couche.</li></ul> <p>Après avoir été instanciés, tous les objets <code>Layers</code> sont stockés dans le <strong>store</strong> afin d'être accessibles partout au sein de l'application.</p> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>Toutes les requêtes HTTP sont effectuées en <strong>parallèle</strong> à l'aide de la méthode <code>Promise.all()</code>, sans quoi le temps de chargement serait plus long, voir la <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Promise/all" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <h4 id="affichage-de-l-interface"><a href="#affichage-de-l-interface" class="header-anchor">#</a> Affichage de l'interface</h4> <p>Après la phase de récupération des données, l'initialisation se termine par l'affichage de <strong>l'interface utilisateur.</strong></p> <p>Les trois composants principaux (cf. <a href="/cartogis54/application-client.html#interface-utilisateur">#Interface utilisateur</a>) se chargent de récupérer les données depuis le <strong>store</strong> afin de les <strong>transmettre</strong> aux sous-composants, permettant ainsi l'affichage des informations récupérées plus tôt.</p> <h3 id="interactions-avec-l-utilisateur"><a href="#interactions-avec-l-utilisateur" class="header-anchor">#</a> Interactions avec l'utilisateur</h3> <p>Lorsque la phase d'initialisation est achevée et que l'interface est <strong>visible</strong> pour l'utilisateur, ce dernier peut commencer à se <strong>servir</strong> de l'application.</p> <h4 id="menu"><a href="#menu" class="header-anchor">#</a> Menu</h4> <p>Le <strong>Menu</strong> est un élément ayant une double utilité au sein de l'application puisqu'il <strong>donne des informations</strong> sur les couches du projet et sert de <strong>point d'entrée</strong> pour la <strong>création</strong> de nouvelles entités.</p> <h5 id="liste-de-couches"><a href="#liste-de-couches" class="header-anchor">#</a> Liste de couches</h5> <p>La <strong>Liste des couches</strong> est un composant qui permet de <strong>visualiser les noms des couches</strong> du projet.</p> <p>Cliquer sur le nom d'une d'entre elles permet de <strong>déployer la légende qui lui est associée</strong>.</p> <h5 id="legende"><a href="#legende" class="header-anchor">#</a> Légende</h5> <p>La <strong>Légende</strong> est un composant <strong>listant les différents types d'entités</strong> présents au sein d'une couche.</p> <p>En cliquant sur un élément de la Légende, l'utilisateur entre alors en <strong>mode édition</strong> et peut <strong>créer une nouvelle entité</strong>.</p> <p>Le double rôle du <strong>Menu</strong> n'a pas été choisi par hasard puisqu'il s'inscrit dans la dynamique de rendre l'interface <strong>simple d'utilisation</strong> en limitant drastiquement le <strong>nombre d'actions</strong> à fournir par l'utilisateur.</p> <h4 id="creation-d-entite"><a href="#creation-d-entite" class="header-anchor">#</a> Création d'entité</h4> <p>L'entrée en <strong>mode édition</strong> par le biais d'un clic sur un élément de la légende déclenche le démarrage de la phase de <strong>Création d'entité</strong>.</p> <p>En entrant dans cette phase, l'application se charge de <strong>créer une nouvelle entité</strong> et <strong>l'ajoute dans la liste des entités</strong> de la couche correspondante.</p> <p>Ici, toutes les entités sont des <strong>objets</strong> JavaScript possédant une structure commune :</p> <p><strong>Structure d'un objet <code>Feature</code></strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
  <span class="token property">&quot;parent&quot;</span><span class="token operator">:</span> Layer<span class="token punctuation">,</span>
  <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> object<span class="token punctuation">,</span>
  <span class="token property">&quot;representation&quot;</span><span class="token operator">:</span> object 
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>id</code> : l'identifiant unique de l'entité.</li> <li><code>parent</code> : l'instance de <code>Layer</code> représentant la couche parente de l'entité.</li> <li><code>properties</code> : un objet sous forme de <strong>clé-valeur</strong> représentant les données de l'entité.</li> <li><code>representation</code> : un objet décrivant la représentation de l'entité telle qu'affichée sur la carte.</li></ul> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>La propritété <code>représentation</code> est créée à l'aide de <strong>l'API de Leaflet</strong>.</p></div> <h5 id="placement-sur-la-carte"><a href="#placement-sur-la-carte" class="header-anchor">#</a> Placement sur la carte</h5> <p>Dès lors que l'application a créé la nouvelle entité, la Légende se rétracte et l'utilisateur peut apercevoir que son <strong>curseur</strong> s'est transformé en <strong>pointeur</strong>, l'invitant à <strong>cliquer sur la carte</strong> de sorte à déterminer les <strong>coordonées</strong> de l'entité.</p> <p>Dans le cas d'une entité <strong>polygonale</strong>, il suffit de <strong>placer tous les points du périmètre</strong> et de recliquer sur le <strong>premier point</strong> pour terminer le placement de l'entité.</p> <p>Les coordonées sont récupérées en réutilisant <strong>l'API de Leaflet</strong> qui offre la possibilité d'ajouter des <strong>écouteurs d'évènement</strong> sur les différents éléments que l'on peut créer (carte, marqueur, polygone, ligne, ...).</p> <p>Ici, il a suffit d'indiquer à l'application que lorsque nous sommes en phase de <strong>Création d'entité</strong>, il faut écouter les clics sur la carte afin de récupérer les <strong>coordonées</strong> et les <strong>affecter</strong> à l'entité en cours de création.</p> <h5 id="representation-de-l-entite"><a href="#representation-de-l-entite" class="header-anchor">#</a> Représentation de l'entité</h5> <p>Après que l'utilisateur ait placé l'entité sur la carte, l'application se charge d'en placer la <strong>représentation</strong> sur la carte.</p> <p>S'il s'agit d'une entité polygonale, la réprésentation se <strong>met à jour</strong> à chaque fois que l'utilisateur ajoute un <strong>nouveau point</strong> au périmètre.</p> <h5 id="remplissage-du-formulaire"><a href="#remplissage-du-formulaire" class="header-anchor">#</a> Remplissage du formulaire</h5> <p>Lorsque l'utilisateur a placé l'entité sur la carte, l'application déploie le composant <strong>Formulaire</strong>.</p> <p>Ce dernier liste les différentes <strong>propriétés</strong> de l'entité sous la forme de <strong>champs remplissables</strong> par l'utilisateur.</p> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>L'apparence des champs du formulaire peut être configurée dans le fichier <code>src/app.config.json</code>, voir la section <a href="/cartogis54/client.html#configuration">#Configuration</a>.</p></div> <p>Après avoir rempli le Formulaire, l'utilisateur peut cliquer sur le boutton <em>Enregistrer</em> pour <strong>insérer</strong> cette nouvelle entité dans la <strong>base de données</strong>.</p> <p>Cette insertion est possible par le biais des <strong>Transactions</strong>.</p> <h3 id="transactions"><a href="#transactions" class="header-anchor">#</a> Transactions</h3> <p>Les <strong>Transactions</strong> sont des <strong>requêtes HTTP</strong> envoyées vers le <strong>flux WFS</strong> dans le but <strong>d'insérer</strong>, <strong>modifier</strong> ou <strong>supprimer une ou des entités</strong>.</p> <p>Ces requêtes sont envoyées vers le WebService via la méthode <strong><code>POST</code></strong> et doivent contenir des données au format <strong>XML</strong>, respecant une structure très précise :</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">wfs:</span>Transaction</span>
   <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>2.0.0<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name">service</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>WFS<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">xmlns:</span>topp</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.openplans.org/topp<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">xmlns:</span>fes</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.opengis.net/fes/2.0<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">xmlns:</span>gml</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.opengis.net/gml/3.2<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">xmlns:</span>wfs</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.opengis.net/wfs/2.0<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.opengis.net/wfs/2.0
                       http://schemas.opengis.net/wfs/2.0/wfs.xsd
                       http://www.opengis.net/gml/3.2
                       http://schemas.opengis.net/gml/3.2.1/gml.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">wfs:</span>Insert</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>education</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>the_geom</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">gml:</span>Point</span> <span class="token attr-name">srsName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>EPSG:2154<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">gml:</span>pos</span> <span class="token attr-name">srsDimension</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            48.682971 6.161681
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">gml:</span>pos</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">gml:</span>Point</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>:the_geom</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nom</span><span class="token punctuation">&gt;</span></span>IUT Nancy-Charlemagne<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nom</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>enseignement superieur<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">topp:</span>tasmania_roads</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">wfs:</span>Insert</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">wfs:</span>Transaction</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>L'exemple ci-dessus présente le corps d'une <strong>Transaction</strong> destinée à <strong>insérer</strong> une entité sur une <strong>couche</strong> <code>education</code> ayant pour pour <strong>coordonées</strong> <code>[48.682971, 6.161681]</code>, pour <strong>nom</strong> <code>IUT Nancy-Charlemagne</code> et pour <strong>type</strong> <code>enseignement superieur</code>.</p> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>Ici, les champs <code>nom</code> et <code>type</code> sont directement liées à la <strong>structure</strong> de la couche tandis que le champ <code>the_geom</code> est un <strong>champ universel</strong> permettant de renseigner les <strong>coordonées</strong> d'une entité.</p></div> <p>De la même manière et en imaginant que l'entité précédente ait été créé en se voyant attribuer <strong>l'identifiant unique</strong> <code>education.13425</code>, voici le corps de la <strong>Transaction</strong> à envoyer pour <strong>supprimer</strong> l'entité :</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">wfs:</span>Transaction</span>
   <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>2.0.0<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name">service</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>WFS<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">xmlns:</span>fes</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.opengis.net/fes/2.0<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">xmlns:</span>wfs</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.opengis.net/wfs/2.0<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.opengis.net/wfs/2.0
                       http://schemas.opengis.net/wfs/2.0/wfs.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">wfs:</span>Delete</span> <span class="token attr-name">typeName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>education<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">fes:</span>Filter</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">fes:</span>ResourceId</span> <span class="token attr-name">rid</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>education.13425<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">fes:</span>Filter</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">wfs:</span>Delete</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">wfs:</span>Transaction</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Ici on se contente d'indiquer au <strong>flux WFS</strong> que l'on souhaite effectuer une <strong>suppresion</strong> sur la resource possédant <strong>l'identifiant</strong> <code>education.13425</code> grâce à la balise <strong><code>&lt;Filter/&gt;</code></strong>.</p> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>Pour ce qui est de la <strong>mise-à-jour</strong>, le corps de la <strong>Transaction</strong> est une <strong>combinaison de l'insertion et de la suppression</strong> puisqu'il suffit de renseigner <strong>les champs et leurs nouvelles valeurs</strong> puis d'ajouter un <strong>filtre</strong> permettant de cibler une resource particulière.</p></div> <h4 id="reponse"><a href="#reponse" class="header-anchor">#</a> Réponse</h4> <p>Après avoir reçu une <strong>Transaction</strong>, le <strong>flux WFS</strong> envoie systématiquement une <strong>réponse</strong> afin d'indiquer si l'opération est un <strong>succès</strong> ou un <strong>échec</strong>.</p> <p>Dans le cas d'un succès, la réponse contient <strong>l'identifiant</strong> de l'entité créée, modifiée ou supprimée, tandis qu'en cas d'échec, la réponse indique <strong>ce qui a posé problème</strong>.</p> <h3 id="modification-d-entite-existante"><a href="#modification-d-entite-existante" class="header-anchor">#</a> Modification d'entité existante</h3> <p>Pour mettre à jour ou supprimer une entité existante, l'utilisateur doit simplement <strong>cliquer sur la représentation</strong> de cette dernière, déclanchant ainsi le démarrage de la phase de <strong>Modification d'entité</strong> et l'ouverture du <strong>Formulaire</strong>.</p> <h4 id="mise-a-jour"><a href="#mise-a-jour" class="header-anchor">#</a> Mise à jour</h4> <p>Lorsque le <strong>Formulaire</strong> est ouvert, l'utilisateur a la possiblité de <strong>déplacer l'entité</strong> ou d'en <strong>modifier les données</strong>.</p> <h5 id="deplacement-de-l-entite"><a href="#deplacement-de-l-entite" class="header-anchor">#</a> Déplacement de l'entité</h5> <p>Si l'utilisateur clique sur la carte, l'application se charge de <strong>modifier les coordonnées</strong> de l'entité et de <strong>déplacer sa représentation</strong>.</p> <p>Dans le cas d'une entité <strong>polygonale</strong>, cliquer à un autre endroit permet de <strong>créer un nouveau polygone</strong>.</p> <h5 id="modification-des-donnees"><a href="#modification-des-donnees" class="header-anchor">#</a> Modification des données</h5> <p>De la même manière que pour la <strong>Création d'entité</strong>, l'utilisateur peut avoir recours aux champs du formulaire pour <strong>modifier les données</strong> d'une entité.</p> <h5 id="enregistrement"><a href="#enregistrement" class="header-anchor">#</a> Enregistrement</h5> <p>Lorsque l'utilisateur est <strong>satisfait</strong> de ses modifications, il peut appuyer sur le boutton <em>Enregistrer</em> afin d'envoyer une <strong>Transaction</strong> de mise à jour dans le but de <strong>persister</strong> ces changements dans la <strong>base de données</strong>.</p> <h4 id="suppression"><a href="#suppression" class="header-anchor">#</a> Suppression</h4> <p>En cliquant sur le bouton <em>Supprimer</em>, l'utilisateur déclenche l'envoie d'une <strong>Transaction</strong> de suppression.</p> <h2 id="personnalisation"><a href="#personnalisation" class="header-anchor">#</a> Personnalisation</h2> <p>CartoGIS54 étant un <strong>outil générique</strong>, il est essentiel d'offrir la possibilité de <strong>personnaliser</strong> l'interface afin de coller le plus possible aux besoin des utilisateurs.</p> <h3 id="style"><a href="#style" class="header-anchor">#</a> Style</h3> <p>Le fichier <code>src/assets/style/custom.css</code> a été prévu pour permettre aux personnes souhaitant développer une application Web à l'aide de CartoGIS54 <strong>d'ajouter ou modifier des règles CSS</strong> et ainsi <strong>changer l'apparence</strong> de l'interface.</p> <div class="custom-block danger"><p class="custom-block-title">Attention</p> <p>Dans le cas d'une <strong>modification</strong> de règle, il est nécessaire d'ajouter la directive <code>!important</code> après vos règles.</p> <p>En effet, de par le fonctionnement de <strong>Vue.js</strong>, les règles CSS définies au sein des fichiers <code>.vue</code> ont la <strong>priorité</strong> et ne peuvent donc pas être <strong>outrepassées</strong> dans cette directive.</p> <p>Autrement, il est possible d'aller modifier les règles CSS des composants directement dans les fichiers <code>.vue</code> correspondants.</p></div> <h3 id="logo"><a href="#logo" class="header-anchor">#</a> Logo</h3> <p>Au sein du fichier <code>src/app.config.json</code>, il est possible d'ajouter un <strong>lien</strong> vers une <strong>image</strong> qui viendra se placer dans <strong>l'En-tête</strong> de l'interface (cf. <a href="/cartogis54/client.html#configuration">#Configuration</a>).</p> <h3 id="modales"><a href="#modales" class="header-anchor">#</a> Modales</h3> <p>Des <strong>modales</strong> peuvent être intégrées à l'application depuis le <strong>fichier de configuration</strong> (cf. <a href="/cartogis54/client.html#configuration">#Configuration</a>).</p> <h4 id="creation"><a href="#creation" class="header-anchor">#</a> Création</h4> <p>Au sein de la section <code>header.modals</code> du <strong>fichier de configuration</strong>, il suffit d'ajouter un <strong>objet</strong> respectant la structure suivante :</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
  <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
  <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
  <span class="token property">&quot;visible&quot;</span><span class="token operator">:</span> boolean
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>name</code> : le nom permettant d'identifier la modale.</li> <li><code>title</code> : le titre affiché sur la partie supérieure de la modale.</li> <li><code>icon</code> : l'identifiant d'un icône issu de la bibliothèque d'icône <a href="http://fontawesome.com" target="_blank" rel="noopener noreferrer">FontAwesome<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li> <li><code>visible</code> : une option indiquant si la modale doit être visible par défaut.</li></ul> <h4 id="contenu"><a href="#contenu" class="header-anchor">#</a> Contenu</h4> <p>Le <strong>contenu</strong> à insérer dans une modale doit être défini dans un <strong>fichier HTML</strong> portant <strong>le même nom</strong> que la modale, au sein du répertore <code>src/modals/</code>.</p> <p><strong>Exemple</strong></p> <p>Après avoir configuré la modale suivante :</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ma_modale&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Ma modale&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fas fa-cat&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;visible&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Je crée le <strong>fichier HTML</strong> correspondant :</p> <p><strong><code>src/modals/ma_modale.html</code></strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>Ma super modale<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="integration"><a href="#integration" class="header-anchor">#</a> Intégration</h4> <p>Au lancement, l'application <strong>analyse le fichier de configuration</strong> et ajoute des boutons permettant d'afficher les modales au sein de <strong>l'En-tête</strong>.</p> <p>Au clic sur un de ces boutons, l'application se charge d'aller récupérer le <strong>contenu</strong> afin de <strong>créer et afficher</strong> la modale associée.</p> <p>Les modales présentant l'option <code>visible</code> avec la valeur <code>true</code> seront <strong>visibles au lancement</strong> de l'application.</p> <h2 id="developpement"><a href="#developpement" class="header-anchor">#</a> Développement</h2> <p>Cette séction reviendra sur mon <strong>ressenti</strong> vis-à-vis de la conduite de ce projet ainsi que sur les <strong>conditions de travail particulières</strong> dues à la pandémie du <strong>COVID-19</strong>.</p> <h3 id="confinement-et-teletravail"><a href="#confinement-et-teletravail" class="header-anchor">#</a> Confinement et télétravail</h3> <p>Le développement de ce projet s'est retrouvé quelques peu <strong>bousculé</strong> par l'apparition du <strong>COVID-19.</strong></p> <p>En effet, avec les mesures prises par le <strong>gouvernement</strong>, je me suis retrouvé contraint de devoir travailler depuis la maison pedant près de <strong>2 mois.</strong></p> <p>Malheureusement, les premières semaines de confinement se sont transformées en <strong>pause forcée</strong> puisque le <strong>Conseil Départemental</strong> a priorisé, à juste titre, la continuité des <strong>services essentiels.</strong></p> <p>De ce fait, je n'ai pas pu avoir accès au VPN de mon lieu de travail avant la <strong>4ème semaine</strong> de confinement. Quand bien même, les conditions de travail n'était pas très adapté et il m'était difficile de poursuivre mon avancée de cette manière.</p> <p>Afin de pouvoir reprendre mon travail rapidement et sous l'accord de mon maître d'apprentissage, je me suis recréé un <strong>environnement de travail virtuel local</strong> grâce à <a href="https://docker.com" target="_blank" rel="noopener noreferrer">Docker<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Ce travail <strong>d'administration</strong> et de <strong>configuration serveur</strong> a pris au total <strong>une semaine.</strong></p> <p>Au total, ces <strong>4 semaines</strong> ne se sont pas avérées être un handicap puisque j'ai réussi à rattraper mon retard en gagnant du temps sur des tâches que j'avais imaginé plus longues.</p> <h3 id="evolution-du-projet"><a href="#evolution-du-projet" class="header-anchor">#</a> Evolution du projet</h3> <p>Comme j'ai pu l'aborder dans <a href="/cartogis54/" class="router-link-active">l'introduction</a>, <strong>CartoGIS54</strong> est l'évolution d'un <strong>projet d'application Web de cartographie</strong> ayant démarré en Janvier 2020.</p> <p>C'est dans une volonté de <strong>réutiliser l'interface</strong> de cette application dans le cadre d'autres projets que mon maître d'apprentissage et moi-même avons pris la décision de <strong>transformer</strong> cette application en <strong>outil permettant de faciliter le développement d'application Web de cartographie</strong>.</p> <p>Rendre une application <strong>générique</strong> n'est pas une chose aisée puisqu'il faut la rendre le plus <strong>configurable</strong> possible afin de répondre à une multitude de besoins différents.</p> <h3 id="difficultes-rencontrees"><a href="#difficultes-rencontrees" class="header-anchor">#</a> Difficultés rencontrées</h3> <p>Au cours du développement de ce projet, j'ai eu à faire face à des <strong>difficultés</strong> variées.</p> <h4 id="communication-avec-les-webservices"><a href="#communication-avec-les-webservices" class="header-anchor">#</a> Communication avec les WebServices</h4> <p>La prise en main des <strong>flux WMS/WFS</strong> n'a pas été simple.</p> <p>La cartographie étant un domaine très <strong>spécialisé</strong>, la <strong>recherche d'informations</strong> a été fastidieuse.</p> <p>Par exemple, il m'a fallu près d'une semaine pour comprendre la manière de <strong>construire</strong> et <strong>envoyer</strong> des <strong>Transactions</strong> (cf. <a href="/cartogis54/client.html#transactions">#Transactions</a>).</p> <h4 id="proxy"><a href="#proxy" class="header-anchor">#</a> Proxy</h4> <p>Peu après le confinement, le <strong>proxy</strong> de mon lieu de travail a été changé et il s'est avéré être un <strong>très gros frein</strong> pour la poursuite du développement.</p> <p>La quasi-totalité des <strong>outils de développement</strong> que j'utilse au quotidien (GitHub, npm, ...) sont b<strong>loqués par le proxy</strong> et il m'a donc été impossible de poursuivre le développement de certaines fonctionnalités.</p> <h3 id="etat-d-avancement"><a href="#etat-d-avancement" class="header-anchor">#</a> Etat d'avancement</h3> <p>Au moment où j'écris ce rapport, je viens de terminer mon apprentissage au sein du <strong>service SIG</strong>.</p> <p>Bien qu'une grande partie des <strong>fonctionnalités principales</strong> ait été implémentée, je n'ai pas été en mesure de parvenir à un résultat <strong>déployable</strong> et <strong>utilisable</strong> par de véritables utilisateur.</p> <h4 id="fonctionnalites-non-implementees"><a href="#fonctionnalites-non-implementees" class="header-anchor">#</a> Fonctionnalités non implémentées</h4> <p>Certains aspects <strong>essentiels</strong> n'ont pas encore été abordé et figurent parmis les <strong>prochaines priorités</strong>.</p> <h4 id="entites-lineaires"><a href="#entites-lineaires" class="header-anchor">#</a> Entités linéaires</h4> <p><strong>CartoGIS54</strong> ayant vu le jour au pendant le développement d'un projet ne gérant que des entités <strong>ponctuelles</strong> et <strong>polygonales</strong>, je n'ai pas eu le temps de gérer la gestion d'entités <strong>linéaires</strong>.</p> <h4 id="integration-infogeo54"><a href="#integration-infogeo54" class="header-anchor">#</a> Intégration InfoGeo54</h4> <p>À terme, les applications développée par le <strong>service SIG</strong> à l'aide de <strong>CartoGIS54</strong> seront intégrées à la plateforme en cours de développement : <strong>InfoGeo54</strong>.</p> <h4 id="gestion-des-utilisateurs"><a href="#gestion-des-utilisateurs" class="header-anchor">#</a> Gestion des utilisateurs</h4> <p>Puisque cette application est destinée à un <strong>usage externe</strong>, il est nécessaire de mettre en place un <strong>système de gestion des utilisateurs</strong> de façon <strong>individuelle</strong> et <strong>groupée</strong>.</p> <p>En effet, les données appartenant à un utilisateur ou un groupe d'utilisateur <strong>ne doivent pas être visibles</strong> par quiconque d'autre.</p> <p>Avec un <strong>système de gestion des utilisateurs</strong>, on assurerait une <strong>sécurisation des données</strong> entre utilisateurs et groupes d'utilisateurs, permettant ainsi à l'interface d'être utilisable par le maire d'une commune ou par une collectivité entière.</p> <p>Puisque les applications développées à l'aide de <strong>CartoGIS54</strong> sont vouées à être déployées sur <strong>InfoGeo54</strong>, une idée aurait été de réutiliser la gestion des utilisateurs de la plateforme en transmettant les données de l'utilisateur via un système de <strong>session</strong>.</p> <h4 id="enregistrement-de-fichiers"><a href="#enregistrement-de-fichiers" class="header-anchor">#</a> Enregistrement de fichiers</h4> <p>Par le biais du <strong>Formulaire</strong>, on souhaiterai rendre possible l'ajout de <strong>fichiers</strong> (images, plans, pdf) à l'ensemble des données d'une entité.</p> <p>Je n'ai malhereusement trouvé <strong>aucune information</strong> mentionnant la possibilité <strong>d'envoyer des fichiers</strong> par le biais d'une <strong>Transaction</strong>.</p> <p>Il faudrait dans ce cas mettre en place un <strong>service personnalisé</strong> permettant la <strong>transmission de fichiers</strong>.</p> <h2 id="conclusion"><a href="#conclusion" class="header-anchor">#</a> Conclusion</h2> <p>Bien qu'il ne soit <strong>pas terminé</strong>, le projet <strong>CartoGIS54</strong> a été une très bonne expérience puisqu'il s'agit du premier projet d'une <strong>telle envergure</strong> sur lequel j'ai eu l'occasion de travailler.</p> <p>Sachant que ce projet sera surement <strong>repris</strong> par un autre développeur, j'ai fait mon maximum pour rendre le code <strong>lisible</strong> et <strong>maintenable</strong>.</p> <p>Ces quelques mois de travail m'ont appris énormément de choses d'un point de vue <strong>technique</strong> et <strong>personnel</strong>.</p> <p>J'ai pu <strong>approfondir</strong> des connaissances acquises au cours de ma formation à l'IUT mais aussi me <strong>former</strong> dans de nouveaux domaines tels que la <strong>cartographie</strong>.</p> <p>Ayant eu l'occasion de <strong>présenter</strong> mon travail à des personnes n'ayant aucune ou peu de notions de développement, j'ai pu améliorer ma <strong>communication</strong>.</p> <p>Excepté pour ce qui est du <a href="/cartogis54/client.html#proxy">#Proxy</a>, aucune des <strong>difficultés</strong> recontrées ne s'est avérée être un frein à mon travail puisque j'ai toujours été en mesure de les <strong>surmonter</strong> par le biais de <strong>recherches</strong> ou en <strong>solicitant mes collègues</strong>.</p> <p>Je suis très <strong>reconnaissant</strong> auprès de mon maître d'apprentissage pour la <strong>confiance</strong> qu'il m'a témoigné en me laissant une très grande <strong>autonomie</strong>, notamment en me permettant de <strong>choisir</strong> les technologies avec lesquelles je souhaitais travailler.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/cartogis54/" class="prev router-link-active">
        CartoGIS54 - À propos
      </a></span> <span class="next"><a href="/cartogis54/plugin.html">
        CartoGIS54 - Plugin QGIS
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.585f677d.js" defer></script><script src="/assets/js/2.25621a30.js" defer></script><script src="/assets/js/6.477c9701.js" defer></script><script src="/assets/js/5.1257138e.js" defer></script><script src="/assets/js/8.71c0e7a1.js" defer></script><script src="/assets/js/9.5bffacd4.js" defer></script><script src="/assets/js/10.a84ed7be.js" defer></script>
  </body>
</html>
